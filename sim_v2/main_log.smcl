{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\frios\Documents\cre_stata\sim_v2/main_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 3 Jun 2025, 12:15:06
{txt}
{com}. 
. display "***********************************************" _n ///
>                 " ------------- PAPER REPLICATION --------------" _n ///
>                 "***********************************************"
{res}***********************************************
 ------------- PAPER REPLICATION --------------
***********************************************
{txt}
{com}. webuse nlswork, clear
{txt}(National Longitudinal Survey of Young Women, 14-24 years old in 1968)

{com}. xtset idcode year
{res}
{col 1}{txt:Panel variable: }{res:idcode}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:year}{txt:, }{res:{bind:68}}{txt: to }{res:{bind:88}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}. gen wage = exp(ln_wage) // Transform log wage to wage for poisson model
{txt}
{com}. gen white = race==1 & race!=.
{txt}
{com}. global depvar1 ln_wage
{txt}
{com}. global depvar2 wage
{txt}
{com}. global depvar3 union
{txt}
{com}. global indep "c.age##c.age c.tenure##c.tenure i.white i.south"
{txt}
{com}. 
. drop if wage==. | white==.  | age==. | tenure==. | south==.
{txt}(441 observations deleted)

{com}. // 1. Fixed Effects (xtreg, fe)
. xtreg $depvar1 $indep, fe  
{txt}{p 0 6 2}note: {bf:1.white} omitted because of collinearity.{p_end}
{res}
{txt}Fixed-effects (within) regression{col 49}Number of obs{col 67}={col 69}{res}    28,093
{txt}Group variable: {res}idcode{txt}{col 49}Number of groups{col 67}={col 69}{res}     4,699

{txt}R-squared:{col 49}Obs per group:
     Within  = {res}0.1458{col 63}{txt}min{col 67}={col 69}{res}         1
{txt}     Between = {res}0.2597{col 63}{txt}avg{col 67}={col 69}{res}       6.0
{txt}     Overall = {res}0.1934{col 63}{txt}max{col 67}={col 69}{res}        15

{txt}{col 49}F({res}5{txt}, {res}23389{txt}){col 67}={col 70}{res}   798.18
{txt}corr(u_i, Xb) = {res}0.1853{txt}{col 49}Prob > F{col 67}={col 73}{res}0.0000

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0422152{col 31}{space 2} .0028639{col 42}{space 1}   14.74{col 51}{space 3}0.000{col 59}{space 4} .0366018{col 72}{space 3} .0478286
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005058{col 31}{space 2} .0000474{col 42}{space 1}  -10.66{col 51}{space 3}0.000{col 59}{space 4}-.0005987{col 72}{space 3}-.0004128
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0410581{col 31}{space 2} .0016336{col 42}{space 1}   25.13{col 51}{space 3}0.000{col 59}{space 4} .0378562{col 72}{space 3}   .04426
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0014481{col 31}{space 2} .0001061{col 42}{space 1}  -13.65{col 51}{space 3}0.000{col 59}{space 4} -.001656{col 72}{space 3}-.0012402
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-.0708552{col 31}{space 2} .0110732{col 42}{space 1}   -6.40{col 51}{space 3}0.000{col 59}{space 4}-.0925594{col 72}{space 3}-.0491509
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .8351408{col 31}{space 2} .0416093{col 42}{space 1}   20.07{col 51}{space 3}0.000{col 59}{space 4} .7535839{col 72}{space 3} .9166976
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .37933074
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .62255837{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}
F test that all u_i=0: F({res}4698{txt}, {res}23389{txt}) = {res}7.38{col 62}{txt}Prob > F = {res}0.0000
{txt}
{com}. est sto m1
{txt}
{com}. // 2. Random Effects (xtreg, re)
. xtreg $depvar1 $indep, re  
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}    28,093
{txt}Group variable: {res}idcode                          {txt}Number of groups  = {res}     4,699

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1447                                         {txt}min = {res}         1
{txt}     Between = {res}0.2724                                         {txt}avg = {res}       6.0
{txt}     Overall = {res}0.2133                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}6{txt})      =  {res}  5414.85
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0468604{col 31}{space 2} .0027709{col 42}{space 1}   16.91{col 51}{space 3}0.000{col 59}{space 4} .0414295{col 72}{space 3} .0522913
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005929{col 31}{space 2} .0000459{col 42}{space 1}  -12.93{col 51}{space 3}0.000{col 59}{space 4}-.0006828{col 72}{space 3} -.000503
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2}  .047666{col 31}{space 2}   .00158{col 42}{space 1}   30.17{col 51}{space 3}0.000{col 59}{space 4} .0445692{col 72}{space 3} .0507628
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2} -.001596{col 31}{space 2} .0001033{col 42}{space 1}  -15.45{col 51}{space 3}0.000{col 59}{space 4}-.0017985{col 72}{space 3}-.0013935
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2} .0899493{col 31}{space 2} .0115055{col 42}{space 1}    7.82{col 51}{space 3}0.000{col 59}{space 4}  .067399{col 72}{space 3} .1124997
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.1207928{col 31}{space 2} .0079702{col 42}{space 1}  -15.16{col 51}{space 3}0.000{col 59}{space 4} -.136414{col 72}{space 3}-.1051715
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .7145047{col 31}{space 2} .0412446{col 42}{space 1}   17.32{col 51}{space 3}0.000{col 59}{space 4} .6336667{col 72}{space 3} .7953426
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .31689629
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. est sto m2
{txt}
{com}. // 3. Stata's built-in CRE (xtreg, cre)
. xtreg $depvar1 $indep, cre
{txt}note: {bf:1.white} omitted from {bf:xt_means} because of collinearity.
{res}
{txt}Correlated random-effects regression{col 49}Number of obs{col 67}={col 69}{res}    28,093
{txt}Group variable: {res}idcode{txt}{col 49}Number of groups{col 67}={col 69}{res}     4,699

{txt}R-squared:{col 49}Obs per group:
     Within  = {res}0.1458{col 63}{txt}min{col 67}={col 69}{res}         1
{txt}     Between = {res}0.2967{col 63}{txt}avg{col 67}={col 69}{res}       6.0
{txt}     Overall = {res}0.2397{col 63}{txt}max{col 67}={col 69}{res}        15

{txt}{col 49}Wald chi2({res}6{txt}){col 67}={col 70}{res}  4057.68
{txt}corr(xit_vars*b, xt_means*Î³) = {res}0.4804{col 49}{txt}Prob > chi2{col 67}={col 73}{res}0.0000

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}xit_vars          {txt}{c |}
{space 14}age {c |}{col 19}{res}{space 2} .0422152{col 31}{space 2} .0028572{col 42}{space 1}   14.78{col 51}{space 3}0.000{col 59}{space 4} .0366153{col 72}{space 3} .0478151
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005058{col 31}{space 2} .0000473{col 42}{space 1}  -10.69{col 51}{space 3}0.000{col 59}{space 4}-.0005985{col 72}{space 3} -.000413
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0410581{col 31}{space 2} .0016298{col 42}{space 1}   25.19{col 51}{space 3}0.000{col 59}{space 4} .0378639{col 72}{space 3} .0442524
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0014481{col 31}{space 2} .0001058{col 42}{space 1}  -13.68{col 51}{space 3}0.000{col 59}{space 4}-.0016555{col 72}{space 3}-.0012407
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2} .0806257{col 31}{space 2} .0116291{col 42}{space 1}    6.93{col 51}{space 3}0.000{col 59}{space 4}  .057833{col 72}{space 3} .1034184
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.0708552{col 31}{space 2} .0110473{col 42}{space 1}   -6.41{col 51}{space 3}0.000{col 59}{space 4}-.0925075{col 72}{space 3}-.0492028
{txt}{space 12}_cons {c |}{col 19}{res}{space 2}-.0311103{col 31}{space 2} .1449233{col 42}{space 1}   -0.21{col 51}{space 3}0.830{col 59}{space 4}-.3151548{col 72}{space 3} .2529341
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}xt_means          {txt}{c |}
{space 14}age {c |}{col 19}{res}{space 2} .0508598{col 31}{space 2} .0105508{col 42}{space 1}    4.82{col 51}{space 3}0.000{col 59}{space 4} .0301807{col 72}{space 3} .0715389
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0008721{col 31}{space 2} .0001748{col 42}{space 1}   -4.99{col 51}{space 3}0.000{col 59}{space 4}-.0012147{col 72}{space 3}-.0005296
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0743258{col 31}{space 2} .0062544{col 42}{space 1}   11.88{col 51}{space 3}0.000{col 59}{space 4} .0620675{col 72}{space 3} .0865841
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0028448{col 31}{space 2} .0004271{col 42}{space 1}   -6.66{col 51}{space 3}0.000{col 59}{space 4}-.0036819{col 72}{space 3}-.0020077
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2} -.105394{col 31}{space 2} .0158334{col 42}{space 1}   -6.66{col 51}{space 3}0.000{col 59}{space 4} -.136427{col 72}{space 3}-.0743611
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .31689629
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}
Mundlak test (xt_means = 0): chi2({res}5{txt}) = {res}457.6671{col 59}{txt}Prob > chi2 = {res}0.0000
{txt}
{com}. est sto m3
{txt}
{com}. // CRE prefix - xtreg
. cre, abs(idcode): xtreg $depvar1 $indep, re  
 ln_wage c.age##c.age c.tenure##c.tenure i.white i.south, re
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}    28,093
{txt}Group variable: {res}idcode                          {txt}Number of groups  = {res}     4,699

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1458                                         {txt}min = {res}         1
{txt}     Between = {res}0.2967                                         {txt}avg = {res}       6.0
{txt}     Overall = {res}0.2397                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}11{txt})     =  {res}  5959.79
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}             ln_wage{col 22}{c |} Coefficient{col 34}  Std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0422152{col 34}{space 2} .0028572{col 45}{space 1}   14.78{col 54}{space 3}0.000{col 62}{space 4} .0366153{col 75}{space 3} .0478151
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0005058{col 34}{space 2} .0000473{col 45}{space 1}  -10.69{col 54}{space 3}0.000{col 62}{space 4}-.0005985{col 75}{space 3} -.000413
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0410581{col 34}{space 2} .0016298{col 45}{space 1}   25.19{col 54}{space 3}0.000{col 62}{space 4} .0378639{col 75}{space 3} .0442524
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0014481{col 34}{space 2} .0001058{col 45}{space 1}  -13.68{col 54}{space 3}0.000{col 62}{space 4}-.0016555{col 75}{space 3}-.0012407
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0806257{col 34}{space 2} .0116291{col 45}{space 1}    6.93{col 54}{space 3}0.000{col 62}{space 4}  .057833{col 75}{space 3} .1034184
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0708552{col 34}{space 2} .0110473{col 45}{space 1}   -6.41{col 54}{space 3}0.000{col 62}{space 4}-.0925075{col 75}{space 3}-.0492028
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0508598{col 34}{space 2} .0105508{col 45}{space 1}    4.82{col 54}{space 3}0.000{col 62}{space 4} .0301807{col 75}{space 3} .0715389
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0008721{col 34}{space 2} .0001748{col 45}{space 1}   -4.99{col 54}{space 3}0.000{col 62}{space 4}-.0012147{col 75}{space 3}-.0005296
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0743258{col 34}{space 2} .0062544{col 45}{space 1}   11.88{col 54}{space 3}0.000{col 62}{space 4} .0620675{col 75}{space 3} .0865841
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0028448{col 34}{space 2} .0004271{col 45}{space 1}   -6.66{col 54}{space 3}0.000{col 62}{space 4}-.0036819{col 75}{space 3}-.0020077
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2} -.105394{col 34}{space 2} .0158334{col 45}{space 1}   -6.66{col 54}{space 3}0.000{col 62}{space 4} -.136427{col 75}{space 3}-.0743611
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .7924772{col 34}{space 2} .0425912{col 45}{space 1}   18.61{col 54}{space 3}0.000{col 62}{space 4} .7089999{col 75}{space 3} .8759545
{txt}{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
             sigma_u {c |} {res} .31689629
             {txt}sigma_e {c |} {res} .29536083
                 {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 21}{c BT}{hline 64}

{com}. est sto m4
{txt}
{com}. // CRE prefix - regress
. cre, abs(idcode): reg $depvar1 $indep, cluster(idcode)  
 ln_wage c.age##c.age c.tenure##c.tenure i.white i.south, cluster(idcode)

{txt}Linear regression                               Number of obs     = {res}    28,093
                                                {txt}F(11, 4698)       =  {res}   312.40
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.2406
                                                {txt}Root MSE          =    {res} .41647

{txt}{ralign 86:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}             ln_wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      t{col 54}   P>|t|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0422152{col 34}{space 2}  .004336{col 45}{space 1}    9.74{col 54}{space 3}0.000{col 62}{space 4} .0337145{col 75}{space 3} .0507158
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0005058{col 34}{space 2} .0000734{col 45}{space 1}   -6.89{col 54}{space 3}0.000{col 62}{space 4}-.0006496{col 75}{space 3} -.000362
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0410581{col 34}{space 2}  .002162{col 45}{space 1}   18.99{col 54}{space 3}0.000{col 62}{space 4} .0368196{col 75}{space 3} .0452966
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0014481{col 34}{space 2} .0001415{col 45}{space 1}  -10.23{col 54}{space 3}0.000{col 62}{space 4}-.0017255{col 75}{space 3}-.0011707
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2}  .093017{col 34}{space 2} .0116009{col 45}{space 1}    8.02{col 54}{space 3}0.000{col 62}{space 4} .0702737{col 75}{space 3} .1157602
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0708552{col 34}{space 2} .0173786{col 45}{space 1}   -4.08{col 54}{space 3}0.000{col 62}{space 4}-.1049254{col 75}{space 3}-.0367849
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0759122{col 34}{space 2} .0127662{col 45}{space 1}    5.95{col 54}{space 3}0.000{col 62}{space 4} .0508845{col 75}{space 3} .1009399
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0012712{col 34}{space 2}  .000214{col 45}{space 1}   -5.94{col 54}{space 3}0.000{col 62}{space 4}-.0016908{col 75}{space 3}-.0008516
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0668775{col 34}{space 2} .0073432{col 45}{space 1}    9.11{col 54}{space 3}0.000{col 62}{space 4} .0524813{col 75}{space 3} .0812736
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0025947{col 34}{space 2} .0005179{col 45}{space 1}   -5.01{col 54}{space 3}0.000{col 62}{space 4}-.0036101{col 75}{space 3}-.0015793
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.1114335{col 34}{space 2} .0207772{col 45}{space 1}   -5.36{col 54}{space 3}0.000{col 62}{space 4}-.1521666{col 75}{space 3}-.0707004
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .7694067{col 34}{space 2} .0632496{col 45}{space 1}   12.16{col 54}{space 3}0.000{col 62}{space 4} .6454078{col 75}{space 3} .8934056
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m5
{txt}
{com}. 
. esttab m1 m2 m3 m4 m5, drop(0.*) nogaps ///
> mtitle("xtreg FE" "xtreg RE" "xtreg CRE" "CRE XTREG" "CRE Regress") b(3) t ///
> nonum nostar tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}5{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg FE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg RE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg CRE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE XTREG{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE Regress{c )-}\\
\hline
main        &            &            &            &            &            \\
age         &       0.042&       0.047&       0.042&       0.042&       0.042\\
            &     (14.74)&     (16.91)&     (14.78)&     (14.78)&      (9.74)\\
c.age#c.age &      -0.001&      -0.001&      -0.001&      -0.001&      -0.001\\
            &    (-10.66)&    (-12.93)&    (-10.69)&    (-10.69)&     (-6.89)\\
tenure      &       0.041&       0.048&       0.041&       0.041&       0.041\\
            &     (25.13)&     (30.17)&     (25.19)&     (25.19)&     (18.99)\\
c.tenure#c.tenure&      -0.001&      -0.002&      -0.001&      -0.001&      -0.001\\
            &    (-13.65)&    (-15.45)&    (-13.68)&    (-13.68)&    (-10.23)\\
1.white     &       0.000&       0.090&       0.081&       0.081&       0.093\\
            &         (.)&      (7.82)&      (6.93)&      (6.93)&      (8.02)\\
1.south     &      -0.071&      -0.121&      -0.071&      -0.071&      -0.071\\
            &     (-6.40)&    (-15.16)&     (-6.41)&     (-6.41)&     (-4.08)\\
m1\_age      &            &            &            &       0.051&       0.076\\
            &            &            &            &      (4.82)&      (5.95)\\
m1\_c\_age\_c\_age&            &            &            &      -0.001&      -0.001\\
            &            &            &            &     (-4.99)&     (-5.94)\\
m1\_tenure   &            &            &            &       0.074&       0.067\\
            &            &            &            &     (11.88)&      (9.11)\\
m1\_c\_tenure\_c\_tenure&            &            &            &      -0.003&      -0.003\\
            &            &            &            &     (-6.66)&     (-5.01)\\
m1\_\_1\_south &            &            &            &      -0.105&      -0.111\\
            &            &            &            &     (-6.66)&     (-5.36)\\
\_cons      &       0.835&       0.715&      -0.031&       0.792&       0.769\\
            &     (20.07)&     (17.32)&     (-0.21)&     (18.61)&     (12.16)\\
\hline
xt\_means    &            &            &            &            &            \\
age         &            &            &       0.051&            &            \\
            &            &            &      (4.82)&            &            \\
c.age#c.age &            &            &      -0.001&            &            \\
            &            &            &     (-4.99)&            &            \\
tenure      &            &            &       0.074&            &            \\
            &            &            &     (11.88)&            &            \\
c.tenure#c.tenure&            &            &      -0.003&            &            \\
            &            &            &     (-6.66)&            &            \\
1.white     &            &            &       0.000&            &            \\
            &            &            &         (.)&            &            \\
1.south     &            &            &      -0.105&            &            \\
            &            &            &     (-6.66)&            &            \\
\hline
\(N\)       &       28093&       28093&       28093&       28093&       28093\\
\hline\hline
\multicolumn{c -(}6{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}. 
. 
. // 1. Fixed Effects (xtreg, fe)
. xtreg $depvar1 $indep, fe  vce(robust)
{txt}{p 0 6 2}note: {bf:1.white} omitted because of collinearity.{p_end}
{res}
{txt}Fixed-effects (within) regression{col 49}Number of obs{col 67}={col 69}{res}    28,093
{txt}Group variable: {res}idcode{txt}{col 49}Number of groups{col 67}={col 69}{res}     4,699

{txt}R-squared:{col 49}Obs per group:
     Within  = {res}0.1458{col 63}{txt}min{col 67}={col 69}{res}         1
{txt}     Between = {res}0.2597{col 63}{txt}avg{col 67}={col 69}{res}       6.0
{txt}     Overall = {res}0.1934{col 63}{txt}max{col 67}={col 69}{res}        15

{txt}{col 49}F({res}5{txt}, {res}4698{txt}){col 67}={col 70}{res}   375.78
{txt}corr(u_i, Xb) = {res}0.1853{txt}{col 49}Prob > F{col 67}={col 73}{res}0.0000

{txt}{ralign 83:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0422152{col 31}{space 2} .0043356{col 42}{space 1}    9.74{col 51}{space 3}0.000{col 59}{space 4} .0337154{col 72}{space 3} .0507149
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005058{col 31}{space 2} .0000734{col 42}{space 1}   -6.89{col 51}{space 3}0.000{col 59}{space 4}-.0006496{col 72}{space 3} -.000362
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0410581{col 31}{space 2} .0021617{col 42}{space 1}   18.99{col 51}{space 3}0.000{col 59}{space 4} .0368201{col 72}{space 3} .0452962
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0014481{col 31}{space 2} .0001415{col 42}{space 1}  -10.23{col 51}{space 3}0.000{col 59}{space 4}-.0017255{col 72}{space 3}-.0011707
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-.0708552{col 31}{space 2} .0173768{col 42}{space 1}   -4.08{col 51}{space 3}0.000{col 59}{space 4}-.1049218{col 72}{space 3}-.0367886
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .8351408{col 31}{space 2} .0626104{col 42}{space 1}   13.34{col 51}{space 3}0.000{col 59}{space 4}  .712395{col 72}{space 3} .9578865
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .37933074
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .62255837{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. est sto m1
{txt}
{com}. // 2. Random Effects (xtreg, re)
. xtreg $depvar1 $indep, re  vce(robust)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}    28,093
{txt}Group variable: {res}idcode                          {txt}Number of groups  = {res}     4,699

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1447                                         {txt}min = {res}         1
{txt}     Between = {res}0.2724                                         {txt}avg = {res}       6.0
{txt}     Overall = {res}0.2133                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}6{txt})      =  {res}  2770.41
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 83:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0468604{col 31}{space 2}  .004085{col 42}{space 1}   11.47{col 51}{space 3}0.000{col 59}{space 4}  .038854{col 72}{space 3} .0548668
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005929{col 31}{space 2} .0000692{col 42}{space 1}   -8.57{col 51}{space 3}0.000{col 59}{space 4}-.0007285{col 72}{space 3}-.0004574
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2}  .047666{col 31}{space 2} .0020556{col 42}{space 1}   23.19{col 51}{space 3}0.000{col 59}{space 4} .0436371{col 72}{space 3} .0516949
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2} -.001596{col 31}{space 2} .0001337{col 42}{space 1}  -11.94{col 51}{space 3}0.000{col 59}{space 4}-.0018581{col 72}{space 3} -.001334
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2} .0899493{col 31}{space 2} .0115513{col 42}{space 1}    7.79{col 51}{space 3}0.000{col 59}{space 4} .0673093{col 72}{space 3} .1125894
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.1207928{col 31}{space 2} .0104497{col 42}{space 1}  -11.56{col 51}{space 3}0.000{col 59}{space 4}-.1412738{col 72}{space 3}-.1003118
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .7145047{col 31}{space 2} .0590075{col 42}{space 1}   12.11{col 51}{space 3}0.000{col 59}{space 4} .5988521{col 72}{space 3} .8301573
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .31689629
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. est sto m2
{txt}
{com}. // 3. Stata's built-in CRE (xtreg, cre)
. xtreg $depvar1 $indep, cre vce(robust)
{txt}note: {bf:1.white} omitted from {bf:xt_means} because of collinearity.
{res}
{txt}Correlated random-effects regression{col 49}Number of obs{col 67}={col 69}{res}    28,093
{txt}Group variable: {res}idcode{txt}{col 49}Number of groups{col 67}={col 69}{res}     4,699

{txt}R-squared:{col 49}Obs per group:
     Within  = {res}0.1458{col 63}{txt}min{col 67}={col 69}{res}         1
{txt}     Between = {res}0.2967{col 63}{txt}avg{col 67}={col 69}{res}       6.0
{txt}     Overall = {res}0.2397{col 63}{txt}max{col 67}={col 69}{res}        15

{txt}{col 49}Wald chi2({res}6{txt}){col 67}={col 70}{res}  1948.37
{txt}corr(xit_vars*b, xt_means*Î³) = {res}0.4804{col 49}{txt}Prob > chi2{col 67}={col 73}{res}0.0000

{txt}{ralign 83:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}xit_vars          {txt}{c |}
{space 14}age {c |}{col 19}{res}{space 2} .0422152{col 31}{space 2}  .004336{col 42}{space 1}    9.74{col 51}{space 3}0.000{col 59}{space 4} .0337167{col 72}{space 3} .0507137
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0005058{col 31}{space 2} .0000734{col 42}{space 1}   -6.89{col 51}{space 3}0.000{col 59}{space 4}-.0006496{col 72}{space 3} -.000362
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0410581{col 31}{space 2}  .002162{col 42}{space 1}   18.99{col 51}{space 3}0.000{col 59}{space 4} .0368207{col 72}{space 3} .0452955
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0014481{col 31}{space 2} .0001415{col 42}{space 1}  -10.23{col 51}{space 3}0.000{col 59}{space 4}-.0017254{col 72}{space 3}-.0011707
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2} .0806257{col 31}{space 2}  .011087{col 42}{space 1}    7.27{col 51}{space 3}0.000{col 59}{space 4} .0588956{col 72}{space 3} .1023558
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.0708552{col 31}{space 2} .0173786{col 42}{space 1}   -4.08{col 51}{space 3}0.000{col 59}{space 4}-.1049166{col 72}{space 3}-.0367937
{txt}{space 12}_cons {c |}{col 19}{res}{space 2}-.0311103{col 31}{space 2} .1509081{col 42}{space 1}   -0.21{col 51}{space 3}0.837{col 59}{space 4}-.3268848{col 72}{space 3} .2646641
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}xt_means          {txt}{c |}
{space 14}age {c |}{col 19}{res}{space 2} .0508598{col 31}{space 2}  .011615{col 42}{space 1}    4.38{col 51}{space 3}0.000{col 59}{space 4} .0280947{col 72}{space 3} .0736248
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0008721{col 31}{space 2}  .000195{col 42}{space 1}   -4.47{col 51}{space 3}0.000{col 59}{space 4}-.0012544{col 72}{space 3}-.0004899
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0743258{col 31}{space 2} .0066953{col 42}{space 1}   11.10{col 51}{space 3}0.000{col 59}{space 4} .0612033{col 72}{space 3} .0874483
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0028448{col 31}{space 2} .0004672{col 42}{space 1}   -6.09{col 51}{space 3}0.000{col 59}{space 4}-.0037606{col 72}{space 3} -.001929
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2} -.105394{col 31}{space 2} .0204917{col 42}{space 1}   -5.14{col 51}{space 3}0.000{col 59}{space 4} -.145557{col 72}{space 3}-.0652311
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} .31689629
          {txt}sigma_e {c |} {res} .29536083
              {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}
Mundlak test (xt_means = 0): chi2({res}5{txt}) = {res}465.0315{col 59}{txt}Prob > chi2 = {res}0.0000
{txt}
{com}. est sto m3
{txt}
{com}. // CRE prefix - xtreg
. cre, abs(idcode): xtreg $depvar1 $indep, re  vce(robust)
 ln_wage c.age##c.age c.tenure##c.tenure i.white i.south, re  vce(robust)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}    28,093
{txt}Group variable: {res}idcode                          {txt}Number of groups  = {res}     4,699

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1458                                         {txt}min = {res}         1
{txt}     Between = {res}0.2967                                         {txt}avg = {res}       6.0
{txt}     Overall = {res}0.2397                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}11{txt})     =  {res}  3787.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 86:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}             ln_wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0422152{col 34}{space 2}  .004336{col 45}{space 1}    9.74{col 54}{space 3}0.000{col 62}{space 4} .0337167{col 75}{space 3} .0507137
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0005058{col 34}{space 2} .0000734{col 45}{space 1}   -6.89{col 54}{space 3}0.000{col 62}{space 4}-.0006496{col 75}{space 3} -.000362
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0410581{col 34}{space 2}  .002162{col 45}{space 1}   18.99{col 54}{space 3}0.000{col 62}{space 4} .0368207{col 75}{space 3} .0452955
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0014481{col 34}{space 2} .0001415{col 45}{space 1}  -10.23{col 54}{space 3}0.000{col 62}{space 4}-.0017254{col 75}{space 3}-.0011707
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0806257{col 34}{space 2}  .011087{col 45}{space 1}    7.27{col 54}{space 3}0.000{col 62}{space 4} .0588956{col 75}{space 3} .1023558
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0708552{col 34}{space 2} .0173786{col 45}{space 1}   -4.08{col 54}{space 3}0.000{col 62}{space 4}-.1049166{col 75}{space 3}-.0367937
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0508598{col 34}{space 2}  .011615{col 45}{space 1}    4.38{col 54}{space 3}0.000{col 62}{space 4} .0280947{col 75}{space 3} .0736248
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0008721{col 34}{space 2}  .000195{col 45}{space 1}   -4.47{col 54}{space 3}0.000{col 62}{space 4}-.0012544{col 75}{space 3}-.0004899
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0743258{col 34}{space 2} .0066953{col 45}{space 1}   11.10{col 54}{space 3}0.000{col 62}{space 4} .0612033{col 75}{space 3} .0874483
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0028448{col 34}{space 2} .0004672{col 45}{space 1}   -6.09{col 54}{space 3}0.000{col 62}{space 4}-.0037606{col 75}{space 3} -.001929
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2} -.105394{col 34}{space 2} .0204917{col 45}{space 1}   -5.14{col 54}{space 3}0.000{col 62}{space 4} -.145557{col 75}{space 3}-.0652311
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .7924772{col 34}{space 2} .0633432{col 45}{space 1}   12.51{col 54}{space 3}0.000{col 62}{space 4} .6683267{col 75}{space 3} .9166277
{txt}{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
             sigma_u {c |} {res} .31689629
             {txt}sigma_e {c |} {res} .29536083
                 {txt}rho {c |} {res} .53513043{txt}   (fraction of variance due to u_i)
{hline 21}{c BT}{hline 64}

{com}. est sto m4
{txt}
{com}. // CRE prefix - regress robust
. cre, abs(idcode): reg $depvar1 $indep, cluster(idcode)  
 ln_wage c.age##c.age c.tenure##c.tenure i.white i.south, cluster(idcode)

{txt}Linear regression                               Number of obs     = {res}    28,093
                                                {txt}F(11, 4698)       =  {res}   312.40
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.2406
                                                {txt}Root MSE          =    {res} .41647

{txt}{ralign 86:(Std. err. adjusted for {res:4,699} clusters in {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}             ln_wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      t{col 54}   P>|t|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0422152{col 34}{space 2}  .004336{col 45}{space 1}    9.74{col 54}{space 3}0.000{col 62}{space 4} .0337145{col 75}{space 3} .0507158
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0005058{col 34}{space 2} .0000734{col 45}{space 1}   -6.89{col 54}{space 3}0.000{col 62}{space 4}-.0006496{col 75}{space 3} -.000362
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0410581{col 34}{space 2}  .002162{col 45}{space 1}   18.99{col 54}{space 3}0.000{col 62}{space 4} .0368196{col 75}{space 3} .0452966
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0014481{col 34}{space 2} .0001415{col 45}{space 1}  -10.23{col 54}{space 3}0.000{col 62}{space 4}-.0017255{col 75}{space 3}-.0011707
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2}  .093017{col 34}{space 2} .0116009{col 45}{space 1}    8.02{col 54}{space 3}0.000{col 62}{space 4} .0702737{col 75}{space 3} .1157602
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0708552{col 34}{space 2} .0173786{col 45}{space 1}   -4.08{col 54}{space 3}0.000{col 62}{space 4}-.1049254{col 75}{space 3}-.0367849
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0759122{col 34}{space 2} .0127662{col 45}{space 1}    5.95{col 54}{space 3}0.000{col 62}{space 4} .0508845{col 75}{space 3} .1009399
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0012712{col 34}{space 2}  .000214{col 45}{space 1}   -5.94{col 54}{space 3}0.000{col 62}{space 4}-.0016908{col 75}{space 3}-.0008516
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0668775{col 34}{space 2} .0073432{col 45}{space 1}    9.11{col 54}{space 3}0.000{col 62}{space 4} .0524813{col 75}{space 3} .0812736
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0025947{col 34}{space 2} .0005179{col 45}{space 1}   -5.01{col 54}{space 3}0.000{col 62}{space 4}-.0036101{col 75}{space 3}-.0015793
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.1114335{col 34}{space 2} .0207772{col 45}{space 1}   -5.36{col 54}{space 3}0.000{col 62}{space 4}-.1521666{col 75}{space 3}-.0707004
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .7694067{col 34}{space 2} .0632496{col 45}{space 1}   12.16{col 54}{space 3}0.000{col 62}{space 4} .6454078{col 75}{space 3} .8934056
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m5
{txt}
{com}. esttab m1 m2 m3 m4 m5, drop(0.*) nogaps ///
> mtitle("xtreg FE" "xtreg RE" "xtreg CRE" "CRE XTREG" "CRE Regress") b(3) t ///
> nonum nostar tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}5{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg FE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg RE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtreg CRE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE XTREG{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE Regress{c )-}\\
\hline
main        &            &            &            &            &            \\
age         &       0.042&       0.047&       0.042&       0.042&       0.042\\
            &      (9.74)&     (11.47)&      (9.74)&      (9.74)&      (9.74)\\
c.age#c.age &      -0.001&      -0.001&      -0.001&      -0.001&      -0.001\\
            &     (-6.89)&     (-8.57)&     (-6.89)&     (-6.89)&     (-6.89)\\
tenure      &       0.041&       0.048&       0.041&       0.041&       0.041\\
            &     (18.99)&     (23.19)&     (18.99)&     (18.99)&     (18.99)\\
c.tenure#c.tenure&      -0.001&      -0.002&      -0.001&      -0.001&      -0.001\\
            &    (-10.23)&    (-11.94)&    (-10.23)&    (-10.23)&    (-10.23)\\
1.white     &       0.000&       0.090&       0.081&       0.081&       0.093\\
            &         (.)&      (7.79)&      (7.27)&      (7.27)&      (8.02)\\
1.south     &      -0.071&      -0.121&      -0.071&      -0.071&      -0.071\\
            &     (-4.08)&    (-11.56)&     (-4.08)&     (-4.08)&     (-4.08)\\
m1\_age      &            &            &            &       0.051&       0.076\\
            &            &            &            &      (4.38)&      (5.95)\\
m1\_c\_age\_c\_age&            &            &            &      -0.001&      -0.001\\
            &            &            &            &     (-4.47)&     (-5.94)\\
m1\_tenure   &            &            &            &       0.074&       0.067\\
            &            &            &            &     (11.10)&      (9.11)\\
m1\_c\_tenure\_c\_tenure&            &            &            &      -0.003&      -0.003\\
            &            &            &            &     (-6.09)&     (-5.01)\\
m1\_\_1\_south &            &            &            &      -0.105&      -0.111\\
            &            &            &            &     (-5.14)&     (-5.36)\\
\_cons      &       0.835&       0.715&      -0.031&       0.792&       0.769\\
            &     (13.34)&     (12.11)&     (-0.21)&     (12.51)&     (12.16)\\
\hline
xt\_means    &            &            &            &            &            \\
age         &            &            &       0.051&            &            \\
            &            &            &      (4.38)&            &            \\
c.age#c.age &            &            &      -0.001&            &            \\
            &            &            &     (-4.47)&            &            \\
tenure      &            &            &       0.074&            &            \\
            &            &            &     (11.10)&            &            \\
c.tenure#c.tenure&            &            &      -0.003&            &            \\
            &            &            &     (-6.09)&            &            \\
1.white     &            &            &       0.000&            &            \\
            &            &            &         (.)&            &            \\
1.south     &            &            &      -0.105&            &            \\
            &            &            &     (-5.14)&            &            \\
\hline
\(N\)       &       28093&       28093&       28093&       28093&       28093\\
\hline\hline
\multicolumn{c -(}6{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}. 
. ** For Appendix Poisson and Linreg
. reghdfe $depvar1 $indep, abs(idcode year) vce(robust)
{res}{txt}(dropped 552 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 8 iterations)
{res}{txt}note: {res}1bn.white{txt} is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)
{res}
{txt}HDFE Linear regression{col 51}Number of obs{col 67}= {res}    27,541
{txt}Absorbing 2 HDFE groups{col 51}F({res}   5{txt},{res}  23375{txt}){col 67}= {res}    208.98
{txt}{col 51}Prob > F{col 67}= {res}    0.0000
{txt}{col 51}R-squared{col 67}= {res}    0.6756
{txt}{col 51}Adj R-squared{col 67}= {res}    0.6178
{txt}{col 51}Within R-sq.{col 67}= {res}    0.0512
{txt}{col 51}Root MSE{col 67}= {res}    0.2942

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}          ln_wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0667275{col 31}{space 2} .0119359{col 42}{space 1}    5.59{col 51}{space 3}0.000{col 59}{space 4} .0433323{col 72}{space 3} .0901227
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2} -.000936{col 31}{space 2} .0000714{col 42}{space 1}  -13.11{col 51}{space 3}0.000{col 59}{space 4}-.0010759{col 72}{space 3}-.0007961
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0414678{col 31}{space 2} .0017228{col 42}{space 1}   24.07{col 51}{space 3}0.000{col 59}{space 4}  .038091{col 72}{space 3} .0448447
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0014983{col 31}{space 2} .0001129{col 42}{space 1}  -13.27{col 51}{space 3}0.000{col 59}{space 4}-.0017197{col 72}{space 3} -.001277
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-.0701296{col 31}{space 2} .0131544{col 42}{space 1}   -5.33{col 51}{space 3}0.000{col 59}{space 4}-.0959131{col 72}{space 3}-.0443462
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .5058685{col 31}{space 2} .3334109{col 42}{space 1}    1.52{col 51}{space 3}0.129{col 59}{space 4}-.1476387{col 72}{space 3} 1.159376
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      idcode{col 14}{c |}{space 1}     4147{col 27}{space 1}        0{col 39}{result}{space 1}     4147{col 53}{text} {col 54}{c |}
{res}{col 1}{text}        year{col 14}{c |}{space 1}       15{col 27}{space 1}        1{col 39}{result}{space 1}       14{col 53}{text} {col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
{res}{txt}
{com}. est sto m1
{txt}
{com}. ppmlhdfe $depvar2 $indep, abs(idcode year) vce(robust)
{res}{txt}(dropped 552 observations that are either {browse "http://scorreia.com/research/singletons.pdf":singletons} or {browse "http://scorreia.com/research/separation.pdf":separated} by a fixed effect)
{res}{txt}note: 1 variable omitted because of collinearity: {res}1bn.white{txt}
{res}{txt}{col  0}Iteration 1:{txt}{col 16}deviance = {res}1.6225e+04 {col 39}{txt}eps = {res}.        {txt}{col 55}{txt}iters = {res}5{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -0.86  {txt}P   
{txt}{col  0}Iteration 2:{txt}{col 16}deviance = {res}1.5231e+04 {col 39}{txt}eps = {res}6.53e-02 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -1.17  {txt}    
{txt}{col  0}Iteration 3:{txt}{col 16}deviance = {res}1.5196e+04 {col 39}{txt}eps = {res}2.31e-03 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -1.23  {txt}    
{txt}{col  0}Iteration 4:{txt}{col 16}deviance = {res}1.5195e+04 {col 39}{txt}eps = {res}2.20e-05 {txt}{col 55}{txt}iters = {res}3{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -1.23  {txt}    
{txt}{col  0}Iteration 5:{txt}{col 16}deviance = {res}1.5195e+04 {col 39}{txt}eps = {res}4.66e-09 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res} -1.23  {txt}    
{txt}{col  0}Iteration 6:{txt}{col 16}deviance = {res}1.5195e+04 {col 39}{txt}eps = {res}7.78e-14 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {res} -1.23  {txt} S  
{txt}{col  0}Iteration 7:{txt}{col 16}deviance = {res}1.5195e+04 {col 39}{txt}eps = {res}1.19e-16 {txt}{col 55}{txt}iters = {res}3{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {res} -1.23  {txt} S O
{txt}{hline 108}
{txt}(legend: {res}p{txt}: exact partial-out   {res}s{txt}: exact solver   {res}h{txt}: step-halving   {res}o{txt}: epsilon below tolerance)
{txt}Converged in 7 iterations and 23 HDFE sub-iterations (tol = 1.0e-08)
{res}{txt}
HDFE {help ppmlhdfe##description:PPML} regression{col 51}No. of obs{col 67}={col 69}{res}    27,541
{txt}Absorbing 2 HDFE groups{col 51}Residual df{col 67}={col 69}{res}    23,375
{txt}{col 51}Wald chi2({res}5{txt}){col 67}={col 69}{res}    424.72
{txt}Deviance{col 22}={col 24}{res} 15195.18195{txt}{col 51}Prob > chi2{col 67}={col 69}{res}    0.0000
{txt}Log pseudolikelihood ={col 24}{res}-56509.13836{txt}{col 51}Pseudo R2{col 67}={col 69}{res}    0.2186
{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}             wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0687256{col 31}{space 2} .0211855{col 42}{space 1}    3.24{col 51}{space 3}0.001{col 59}{space 4} .0272028{col 72}{space 3} .1102485
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0008532{col 31}{space 2} .0001107{col 42}{space 1}   -7.71{col 51}{space 3}0.000{col 59}{space 4}-.0010702{col 72}{space 3}-.0006363
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0374627{col 31}{space 2} .0027423{col 42}{space 1}   13.66{col 51}{space 3}0.000{col 59}{space 4}  .032088{col 72}{space 3} .0428374
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0016658{col 31}{space 2} .0002678{col 42}{space 1}   -6.22{col 51}{space 3}0.000{col 59}{space 4}-.0021906{col 72}{space 3}-.0011409
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-.0900157{col 31}{space 2} .0194157{col 42}{space 1}   -4.64{col 51}{space 3}0.000{col 59}{space 4}-.1280697{col 72}{space 3}-.0519617
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} .5807774{col 31}{space 2} .6448367{col 42}{space 1}    0.90{col 51}{space 3}0.368{col 59}{space 4}-.6830793{col 72}{space 3} 1.844634
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      idcode{col 14}{c |}{space 1}     4147{col 27}{space 1}        0{col 39}{result}{space 1}     4147{col 53}{text} {col 54}{c |}
{res}{col 1}{text}        year{col 14}{c |}{space 1}       15{col 27}{space 1}        1{col 39}{result}{space 1}       14{col 53}{text} {col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
{res}{txt}
{com}. est sto m2
{txt}
{com}. cre, abs(idcode year):reg $depvar1 $indep, robust
 ln_wage c.age##c.age c.tenure##c.tenure i.white i.south, robust

{txt}Linear regression                               Number of obs     = {res}    28,093
                                                {txt}F(16, 28076)      =  {res}   603.90
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.2389
                                                {txt}Root MSE          =    {res} .41697

{txt}{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}             ln_wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      t{col 54}   P>|t|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0667275{col 34}{space 2} .0163421{col 45}{space 1}    4.08{col 54}{space 3}0.000{col 62}{space 4} .0346961{col 75}{space 3} .0987588
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2} -.000936{col 34}{space 2}  .000093{col 45}{space 1}  -10.07{col 54}{space 3}0.000{col 62}{space 4}-.0011183{col 75}{space 3}-.0007538
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0414678{col 34}{space 2} .0023838{col 45}{space 1}   17.40{col 54}{space 3}0.000{col 62}{space 4} .0367954{col 75}{space 3} .0461403
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0014983{col 34}{space 2} .0001599{col 45}{space 1}   -9.37{col 54}{space 3}0.000{col 62}{space 4}-.0018117{col 75}{space 3} -.001185
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0916365{col 34}{space 2} .0055272{col 45}{space 1}   16.58{col 54}{space 3}0.000{col 62}{space 4}  .080803{col 75}{space 3}   .10247
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0701296{col 34}{space 2} .0169314{col 45}{space 1}   -4.14{col 54}{space 3}0.000{col 62}{space 4} -.103316{col 75}{space 3}-.0369433
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0675911{col 34}{space 2} .0183291{col 45}{space 1}    3.69{col 54}{space 3}0.000{col 62}{space 4} .0316652{col 75}{space 3}  .103517
{txt}{space 14}m2_age {c |}{col 22}{res}{space 2}-.1306764{col 34}{space 2} .0336639{col 45}{space 1}   -3.88{col 54}{space 3}0.000{col 62}{space 4}-.1966593{col 75}{space 3}-.0646936
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0011803{col 34}{space 2} .0001623{col 45}{space 1}   -7.27{col 54}{space 3}0.000{col 62}{space 4}-.0014985{col 75}{space 3}-.0008622
{txt}{space 6}m2_c_age_c_age {c |}{col 22}{res}{space 2} .0025616{col 34}{space 2} .0006439{col 45}{space 1}    3.98{col 54}{space 3}0.000{col 62}{space 4} .0012996{col 75}{space 3} .0038236
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0678701{col 34}{space 2} .0046554{col 45}{space 1}   14.58{col 54}{space 3}0.000{col 62}{space 4} .0587453{col 75}{space 3}  .076995
{txt}{space 11}m2_tenure {c |}{col 22}{res}{space 2} .0681087{col 34}{space 2} .0220159{col 45}{space 1}    3.09{col 54}{space 3}0.002{col 62}{space 4} .0249564{col 75}{space 3}  .111261
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0026794{col 34}{space 2} .0003333{col 45}{space 1}   -8.04{col 54}{space 3}0.000{col 62}{space 4}-.0033327{col 75}{space 3}-.0020262
{txt}m2_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0101875{col 34}{space 2}  .003295{col 45}{space 1}   -3.09{col 54}{space 3}0.002{col 62}{space 4}-.0166459{col 75}{space 3} -.003729
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.1079881{col 34}{space 2} .0178708{col 45}{space 1}   -6.04{col 54}{space 3}0.000{col 62}{space 4}-.1430157{col 75}{space 3}-.0729606
{txt}{space 9}m2__1_south {c |}{col 22}{res}{space 2} .3130258{col 34}{space 2} .5821407{col 45}{space 1}    0.54{col 54}{space 3}0.591{col 62}{space 4}-.8279981{col 75}{space 3}  1.45405
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .4403109{col 34}{space 2} .4576042{col 45}{space 1}    0.96{col 54}{space 3}0.336{col 62}{space 4}-.4566155{col 75}{space 3} 1.337237
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m3
{txt}
{com}. cre, abs(idcode year):poisson $depvar2 $indep, robust
 wage c.age##c.age c.tenure##c.tenure i.white i.south, robust
{txt}{p 0 6 2}note: noncount dependent variable encountered;{txt} if you are fitting an exponential-mean model,{txt} consider using robust standard errors. {p_end}
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-68710.572}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-68710.487}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-68710.487}  
{res}
{txt}{col 1}Poisson regression{col 56}{lalign 13:Number of obs}{col 69} = {res}{ralign 7:28,093}
{txt}{col 56}{lalign 13:Wald chi2({res:16})}{col 69} = {res}{ralign 7:6797.38}
{txt}{col 56}{lalign 13:Prob > chi2}{col 69} = {res}{ralign 7:0.0000}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-68710.487}{txt}{col 56}{lalign 13:Pseudo R2}{col 69} = {res}{ralign 7:0.0694}

{txt}{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}                wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0668087{col 34}{space 2}    .0281{col 45}{space 1}    2.38{col 54}{space 3}0.017{col 62}{space 4} .0117337{col 75}{space 3} .1218837
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0008212{col 34}{space 2} .0001393{col 45}{space 1}   -5.89{col 54}{space 3}0.000{col 62}{space 4}-.0010943{col 75}{space 3}-.0005481
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0373131{col 34}{space 2} .0037469{col 45}{space 1}    9.96{col 54}{space 3}0.000{col 62}{space 4} .0299693{col 75}{space 3}  .044657
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0017088{col 34}{space 2} .0003533{col 45}{space 1}   -4.84{col 54}{space 3}0.000{col 62}{space 4}-.0024012{col 75}{space 3}-.0010163
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0992642{col 34}{space 2} .0082917{col 45}{space 1}   11.97{col 54}{space 3}0.000{col 62}{space 4} .0830128{col 75}{space 3} .1155155
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0991492{col 34}{space 2} .0285111{col 45}{space 1}   -3.48{col 54}{space 3}0.001{col 62}{space 4}  -.15503{col 75}{space 3}-.0432685
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .0930923{col 34}{space 2} .0316159{col 45}{space 1}    2.94{col 54}{space 3}0.003{col 62}{space 4} .0311262{col 75}{space 3} .1550584
{txt}{space 14}m2_age {c |}{col 22}{res}{space 2}-.1738091{col 34}{space 2} .0473529{col 45}{space 1}   -3.67{col 54}{space 3}0.000{col 62}{space 4} -.266619{col 75}{space 3}-.0809992
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0016801{col 34}{space 2}  .000257{col 45}{space 1}   -6.54{col 54}{space 3}0.000{col 62}{space 4}-.0021838{col 75}{space 3}-.0011764
{txt}{space 6}m2_c_age_c_age {c |}{col 22}{res}{space 2} .0030555{col 34}{space 2} .0007978{col 45}{space 1}    3.83{col 54}{space 3}0.000{col 62}{space 4} .0014918{col 75}{space 3} .0046192
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0458955{col 34}{space 2} .0124344{col 45}{space 1}    3.69{col 54}{space 3}0.000{col 62}{space 4} .0215246{col 75}{space 3} .0702664
{txt}{space 11}m2_tenure {c |}{col 22}{res}{space 2} .1491943{col 34}{space 2} .0289321{col 45}{space 1}    5.16{col 54}{space 3}0.000{col 62}{space 4} .0924884{col 75}{space 3} .2059003
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0010369{col 34}{space 2}  .001076{col 45}{space 1}   -0.96{col 54}{space 3}0.335{col 62}{space 4}-.0031459{col 75}{space 3} .0010721
{txt}m2_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0127048{col 34}{space 2} .0039975{col 45}{space 1}   -3.18{col 54}{space 3}0.001{col 62}{space 4}-.0205398{col 75}{space 3}-.0048698
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.0758684{col 34}{space 2} .0304233{col 45}{space 1}   -2.49{col 54}{space 3}0.013{col 62}{space 4}-.1354969{col 75}{space 3}-.0162399
{txt}{space 9}m2__1_south {c |}{col 22}{res}{space 2} .0645582{col 34}{space 2} .8154828{col 45}{space 1}    0.08{col 54}{space 3}0.937{col 62}{space 4}-1.533759{col 75}{space 3} 1.662875
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .4549049{col 34}{space 2} .8231335{col 45}{space 1}    0.55{col 54}{space 3}0.581{col 62}{space 4}-1.158407{col 75}{space 3} 2.068217
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. est sto m4
{txt}
{com}. esttab m1 m2 m3 m4 , drop(0.*) nogaps ///
> mtitle("reghdfe" "ppmlhdfe" "CRE regress" "CRE poisson") b(3) t ///
> nonum nostar tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}4{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}reghdfe{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}ppmlhdfe{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE regress{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE poisson{c )-}\\
\hline
main        &            &            &            &            \\
age         &       0.067&       0.069&       0.067&       0.067\\
            &      (5.59)&      (3.24)&      (4.08)&      (2.38)\\
c.age#c.age &      -0.001&      -0.001&      -0.001&      -0.001\\
            &    (-13.11)&     (-7.71)&    (-10.07)&     (-5.89)\\
tenure      &       0.041&       0.037&       0.041&       0.037\\
            &     (24.07)&     (13.66)&     (17.40)&      (9.96)\\
c.tenure#c.tenure&      -0.001&      -0.002&      -0.001&      -0.002\\
            &    (-13.27)&     (-6.22)&     (-9.37)&     (-4.84)\\
1.white     &       0.000&       0.000&       0.092&       0.099\\
            &         (.)&         (.)&     (16.58)&     (11.97)\\
1.south     &      -0.070&      -0.090&      -0.070&      -0.099\\
            &     (-5.33)&     (-4.64)&     (-4.14)&     (-3.48)\\
m1\_age      &            &            &       0.068&       0.093\\
            &            &            &      (3.69)&      (2.94)\\
m2\_age      &            &            &      -0.131&      -0.174\\
            &            &            &     (-3.88)&     (-3.67)\\
m1\_c\_age\_c\_age&            &            &      -0.001&      -0.002\\
            &            &            &     (-7.27)&     (-6.54)\\
m2\_c\_age\_c\_age&            &            &       0.003&       0.003\\
            &            &            &      (3.98)&      (3.83)\\
m1\_tenure   &            &            &       0.068&       0.046\\
            &            &            &     (14.58)&      (3.69)\\
m2\_tenure   &            &            &       0.068&       0.149\\
            &            &            &      (3.09)&      (5.16)\\
m1\_c\_tenure\_c\_tenure&            &            &      -0.003&      -0.001\\
            &            &            &     (-8.04)&     (-0.96)\\
m2\_c\_tenure\_c\_tenure&            &            &      -0.010&      -0.013\\
            &            &            &     (-3.09)&     (-3.18)\\
m1\_\_1\_south &            &            &      -0.108&      -0.076\\
            &            &            &     (-6.04)&     (-2.49)\\
m2\_\_1\_south &            &            &       0.313&       0.065\\
            &            &            &      (0.54)&      (0.08)\\
\_cons      &       0.506&       0.581&       0.440&       0.455\\
            &      (1.52)&      (0.90)&      (0.96)&      (0.55)\\
\hline
\(N\)       &       27541&       27541&       28093&       28093\\
\hline\hline
\multicolumn{c -(}5{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}. 
. ** Poisson
. 
. 
. webuse nlswork, clear
{txt}(National Longitudinal Survey of Young Women, 14-24 years old in 1968)

{com}. xtset idcode year
{res}
{col 1}{txt:Panel variable: }{res:idcode}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:year}{txt:, }{res:{bind:68}}{txt: to }{res:{bind:88}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}. gen wage = exp(ln_wage) // Transform log wage to wage for poisson model
{txt}
{com}. gen white = race==1 & race!=.
{txt}
{com}. global depvar1 ln_wage
{txt}
{com}. global depvar2 wage
{txt}
{com}. global depvar3 union
{txt}
{com}. global indep "c.age##c.age c.tenure##c.tenure i.white i.south"
{txt}
{com}. 
. drop if white==. | wage==. | age==. | tenure==. | south==.
{txt}(441 observations deleted)

{com}. bysort idcode:gen nobs=_N
{txt}
{com}. drop if nobs==1
{txt}(552 observations deleted)

{com}. 
. gen age_sqr = age*age
{txt}
{com}. gen tenure_sqr  = tenure*tenure
{txt}
{com}. global indep2 "age age_sqr tenure tenure_sqr white south"
{txt}
{com}. 
. 
. xtpoisson $depvar2 $indep, fe vce(robust)
{txt}note: you are responsible for interpretation of non-count dep. variable
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res: -47084.65}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-45675.426}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-45673.992}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-45673.992}  
{res}
{txt}{col 1}Conditional fixed-effects Poisson regression{col 53}{lalign 16:Number of obs}{col 69} = {res}{ralign 7:27,541}
{txt}{col 1}{txt}Group variable: {res}idcode{txt}{col 53}{lalign 16:Number of groups}{col 69} = {res}{ralign 7:4,147}

{txt}{col 53}Obs per group:
{col 53}{ralign 16:min}{col 69} = {res}{ralign 7:2}
{txt}{col 53}{ralign 16:avg}{col 69} = {res}{ralign 7:6.6}
{txt}{col 53}{ralign 16:max}{col 69} = {res}{ralign 7:15}

{txt}{col 53}{lalign 16:Wald chi2({res:5})}{col 69} = {res}{ralign 7:1428.28}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-45673.992}{txt}{col 53}{lalign 16:Prob > chi2}{col 69} = {res}{ralign 7:0.0000}

{txt}{ralign 83:(Std. err. adjusted for clustering on {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}             wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0288483{col 31}{space 2} .0069671{col 42}{space 1}    4.14{col 51}{space 3}0.000{col 59}{space 4} .0151932{col 72}{space 3} .0425035
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0001672{col 31}{space 2} .0001234{col 42}{space 1}   -1.35{col 51}{space 3}0.176{col 59}{space 4} -.000409{col 72}{space 3} .0000747
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0371833{col 31}{space 2} .0034159{col 42}{space 1}   10.89{col 51}{space 3}0.000{col 59}{space 4} .0304882{col 72}{space 3} .0438784
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0016153{col 31}{space 2} .0003272{col 42}{space 1}   -4.94{col 51}{space 3}0.000{col 59}{space 4}-.0022566{col 72}{space 3} -.000974
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-.0925532{col 31}{space 2} .0259817{col 42}{space 1}   -3.56{col 51}{space 3}0.000{col 59}{space 4}-.1434764{col 72}{space 3}-.0416301
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. est sto m1
{txt}
{com}. xtpoisson $depvar2 $indep, re vce(robust)
{txt}note: you are responsible for interpretation of non-count dep. variable

Fitting Poisson model:
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-67818.631}  
Iteration 1:{space 2}Log pseudolikelihood = {res: -67818.56}  
Iteration 2:{space 2}Log pseudolikelihood = {res: -67818.56}  
{res}
{txt}Fitting full model:
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-64656.195}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-62813.287}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-61980.553}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-61887.864}  
Iteration 4:{space 2}Log pseudolikelihood = {res:-61887.136}  
Iteration 5:{space 2}Log pseudolikelihood = {res:-61887.136}  
{res}
{txt}{col 1}Random-effects Poisson regression{col 51}{lalign 16:Number of obs}{col 67} = {res}{ralign 9:27,541}
{txt}{col 1}{txt}Group variable: {res}idcode{txt}{col 51}{lalign 16:Number of groups}{col 67} = {res}{ralign 9:4,147}

{txt}{col 1}Random effects u_i ~ {txt:Gamma}{col 51}Obs per group:
{col 51}{ralign 16:min}{col 67} = {res}{ralign 9:2}
{txt}{col 51}{ralign 16:avg}{col 67} = {res}{ralign 9:6.6}
{txt}{col 51}{ralign 16:max}{col 67} = {res}{ralign 9:15}

{txt}{col 51}{lalign 16:Wald chi2({res:6})}{col 67} = {res}{ralign 9:109616.41}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-61887.136}{txt}{col 51}{lalign 16:Prob > chi2}{col 67} = {res}{ralign 9:0.0000}

{txt}{ralign 83:(Std. err. adjusted for clustering on {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}             wage{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2} .0401801{col 31}{space 2} .0069815{col 42}{space 1}    5.76{col 51}{space 3}0.000{col 59}{space 4} .0264965{col 72}{space 3} .0538637
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}-.0003734{col 31}{space 2} .0001255{col 42}{space 1}   -2.97{col 51}{space 3}0.003{col 59}{space 4}-.0006194{col 72}{space 3}-.0001273
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .0447665{col 31}{space 2} .0033812{col 42}{space 1}   13.24{col 51}{space 3}0.000{col 59}{space 4} .0381395{col 72}{space 3} .0513936
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0017258{col 31}{space 2}   .00026{col 42}{space 1}   -6.64{col 51}{space 3}0.000{col 59}{space 4}-.0022355{col 72}{space 3}-.0012162
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2} .0954236{col 31}{space 2} .0139978{col 42}{space 1}    6.82{col 51}{space 3}0.000{col 59}{space 4} .0679885{col 72}{space 3} .1228587
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.1420776{col 31}{space 2} .0152284{col 42}{space 1}   -9.33{col 51}{space 3}0.000{col 59}{space 4}-.1719248{col 72}{space 3}-.1122304
{txt}{space 12}_cons {c |}{col 19}{res}{space 2}  .837081{col 31}{space 2} .0954332{col 42}{space 1}    8.77{col 51}{space 3}0.000{col 59}{space 4} .6500354{col 72}{space 3} 1.024127
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}/lnalpha {c |}{col 19}{res}{space 2}-2.237697{col 31}{space 2} .3024628{col 59}{space 4}-2.830513{col 72}{space 3} -1.64488
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
            alpha {c |}{col 19}{res}{space 2}  .106704{col 31}{space 2}  .032274{col 59}{space 4} .0589826{col 72}{space 3} .1930357
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{txt}LR test of alpha=0: {help j_chibar##|_new:chibar2(01) = }{res}1.2e+04{col 56}{txt}Prob >= chibar2 = {res}0.000
{txt}
{com}. est sto m2
{txt}
{com}. xthybrid $depvar2 $indep2 , clusterid(idcode) vce(robust) family(poisson) link(log)  cre se

{txt}The variable 'white' does not vary sufficiently within clusters
and will not be used to create additional regressors.
{res}[~0% of the total variance in 'white' is within clusters]

{txt}{p}Correlated random effects model. Family: poisson. Link: log.

{c TLC}{c -}{hline 20}{c -}{c TT}{c -}{hline 10}{c -}{c TRC}
{c |} {ralign 20:Variable} {c |} {center 10:model} {c |}
{c LT}{c -}{hline 20}{c -}{c +}{c -}{hline 10}{c -}{c RT}
{res}{txt}{c |} {res}wage                 {txt}{c |}{res} {ralign 10:}{txt} {c |}
{res}{txt}{c |} {space 12}R__white {c |}{res} {ralign 10:0.0934}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0128}{txt} {c |}
{res}{txt}{c |} {space 14}W__age {c |}{res} {ralign 10:0.0283}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0069}{txt} {c |}
{res}{txt}{c |} {space 10}W__age_sqr {c |}{res} {ralign 10:-0.0002}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0001}{txt} {c |}
{res}{txt}{c |} {space 11}W__tenure {c |}{res} {ralign 10:0.0371}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0034}{txt} {c |}
{res}{txt}{c |} {space 7}W__tenure_sqr {c |}{res} {ralign 10:-0.0016}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0003}{txt} {c |}
{res}{txt}{c |} {space 12}W__south {c |}{res} {ralign 10:-0.0937}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0266}{txt} {c |}
{res}{txt}{c |} {space 14}D__age {c |}{res} {ralign 10:0.1081}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0156}{txt} {c |}
{res}{txt}{c |} {space 10}D__age_sqr {c |}{res} {ralign 10:-0.0019}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0003}{txt} {c |}
{res}{txt}{c |} {space 11}D__tenure {c |}{res} {ralign 10:0.0629}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0102}{txt} {c |}
{res}{txt}{c |} {space 7}D__tenure_sqr {c |}{res} {ralign 10:-0.0021}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0009}{txt} {c |}
{res}{txt}{c |} {space 12}D__south {c |}{res} {ralign 10:-0.0870}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0297}{txt} {c |}
{res}{txt}{c |} {space 15}_cons {c |}{res} {ralign 10:-0.6460}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.1931}{txt} {c |}
{res}{txt}{c LT}{c -}{hline 20}{c -}{c +}{c -}{hline 10}{c -}{c RT}
{res}{txt}{c |} {res}   var(_cons[idcode]){txt}{c |}{res} {ralign 10:}{txt} {c |}
{res}{txt}{c |} {space 15}_cons {c |}{res} {ralign 10:0.0946}{txt} {c |}
{res}{txt}{c |} {space 20} {c |}{res} {ralign 10:0.0038}{txt} {c |}
{res}{txt}{c LT}{c -}{hline 20}{c -}{c +}{c -}{hline 10}{c -}{c RT}
{c |} {res}{lalign 20:Statistics}{txt} {c |} {center 10:} {c |}
{res}{txt}{c |} {ralign 20:ll} {c |}{res} {ralign 10:-6.157e+04}{txt} {c |}
{res}{txt}{c |} {ralign 20:chi2} {c |}{res} {ralign 10:3074.5550}{txt} {c |}
{res}{txt}{c |} {ralign 20:p} {c |}{res} {ralign 10:0.0000}{txt} {c |}
{res}{txt}{c |} {ralign 20:aic} {c |}{res} {ralign 10:1.232e+05}{txt} {c |}
{res}{txt}{c |} {ralign 20:bic} {c |}{res} {ralign 10:1.233e+05}{txt} {c |}
{res}{txt}{c BLC}{c -}{hline 20}{c -}{c BT}{c -}{hline 10}{c -}{c BRC}
{ralign 37:Legend: b/se}
{res}{txt}Level 1: {res}27541{txt} units. Level 2: {res}4147{txt} units.

{com}. est sto m3
{txt}
{com}. cre, abs(idcode): poisson $depvar2 $indep, cluster(idcode)
 wage c.age##c.age c.tenure##c.tenure i.white i.south, cluster(idcode)
{txt}{p 0 6 2}note: noncount dependent variable encountered;{txt} if you are fitting an exponential-mean model,{txt} consider using robust standard errors. {p_end}
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-67296.144}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-67296.067}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-67296.067}  
{res}
{txt}{col 1}Poisson regression{col 56}{lalign 13:Number of obs}{col 69} = {res}{ralign 7:27,541}
{txt}{col 56}{lalign 13:Wald chi2({res:11})}{col 69} = {res}{ralign 7:2596.65}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-67296.067}{txt}{col 56}{lalign 13:Prob > chi2}{col 69} = {res}{ralign 7:0.0000}

{txt}{ralign 86:(Std. err. adjusted for {res:4,147} clusters in {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}                wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0272388{col 34}{space 2} .0069523{col 45}{space 1}    3.92{col 54}{space 3}0.000{col 62}{space 4} .0136126{col 75}{space 3}  .040865
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0001517{col 34}{space 2} .0001236{col 45}{space 1}   -1.23{col 54}{space 3}0.220{col 62}{space 4}-.0003939{col 75}{space 3} .0000905
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0363874{col 34}{space 2}  .003615{col 45}{space 1}   10.07{col 54}{space 3}0.000{col 62}{space 4}  .029302{col 75}{space 3} .0434727
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0015804{col 34}{space 2} .0003455{col 45}{space 1}   -4.57{col 54}{space 3}0.000{col 62}{space 4}-.0022577{col 75}{space 3}-.0009032
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2}  .103598{col 34}{space 2} .0152762{col 45}{space 1}    6.78{col 54}{space 3}0.000{col 62}{space 4} .0736572{col 75}{space 3} .1335389
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.1003176{col 34}{space 2} .0304992{col 45}{space 1}   -3.29{col 54}{space 3}0.001{col 62}{space 4}-.1600948{col 75}{space 3}-.0405403
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .1520158{col 34}{space 2} .0203478{col 45}{space 1}    7.47{col 54}{space 3}0.000{col 62}{space 4} .1121348{col 75}{space 3} .1918967
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}  -.00252{col 34}{space 2} .0003431{col 45}{space 1}   -7.35{col 54}{space 3}0.000{col 62}{space 4}-.0031924{col 75}{space 3}-.0018476
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0469642{col 34}{space 2} .0151478{col 45}{space 1}    3.10{col 54}{space 3}0.002{col 62}{space 4}  .017275{col 75}{space 3} .0766533
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0011908{col 34}{space 2} .0012483{col 45}{space 1}   -0.95{col 54}{space 3}0.340{col 62}{space 4}-.0036374{col 75}{space 3} .0012558
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.0806509{col 34}{space 2} .0346755{col 45}{space 1}   -2.33{col 54}{space 3}0.020{col 62}{space 4}-.1486136{col 75}{space 3}-.0126882
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} 1.006772{col 34}{space 2} .0966494{col 45}{space 1}   10.42{col 54}{space 3}0.000{col 62}{space 4} .8173429{col 75}{space 3} 1.196201
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. est sto m4
{txt}
{com}. cre, abs(idcode): xtpoisson $depvar2 $indep, re vce(robust)
 wage c.age##c.age c.tenure##c.tenure i.white i.south, re vce(robust)
{txt}note: you are responsible for interpretation of non-count dep. variable

Fitting Poisson model:
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-67296.144}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-67296.067}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-67296.067}  
{res}
{txt}Fitting full model:
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-64437.609}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-62878.235}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-61979.292}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-61804.741}  
Iteration 4:{space 2}Log pseudolikelihood = {res:-61711.003}  
Iteration 5:{space 2}Log pseudolikelihood = {res:  -61710.7}  
Iteration 6:{space 2}Log pseudolikelihood = {res:  -61710.7}  
{res}
{txt}{col 1}Random-effects Poisson regression{col 51}{lalign 16:Number of obs}{col 67} = {res}{ralign 9:27,541}
{txt}{col 1}{txt}Group variable: {res}idcode{txt}{col 51}{lalign 16:Number of groups}{col 67} = {res}{ralign 9:4,147}

{txt}{col 1}Random effects u_i ~ {txt:Gamma}{col 51}Obs per group:
{col 51}{ralign 16:min}{col 67} = {res}{ralign 9:2}
{txt}{col 51}{ralign 16:avg}{col 67} = {res}{ralign 9:6.6}
{txt}{col 51}{ralign 16:max}{col 67} = {res}{ralign 9:15}

{txt}{col 51}{lalign 16:Wald chi2({res:11})}{col 67} = {res}{ralign 9:119910.98}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 8:-61710.7}{txt}{col 51}{lalign 16:Prob > chi2}{col 67} = {res}{ralign 9:0.0000}

{txt}{ralign 86:(Std. err. adjusted for clustering on {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}                wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0282526{col 34}{space 2} .0069347{col 45}{space 1}    4.07{col 54}{space 3}0.000{col 62}{space 4} .0146608{col 75}{space 3} .0418444
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0001602{col 34}{space 2} .0001229{col 45}{space 1}   -1.30{col 54}{space 3}0.192{col 62}{space 4}-.0004011{col 75}{space 3} .0000807
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0370893{col 34}{space 2} .0034381{col 45}{space 1}   10.79{col 54}{space 3}0.000{col 62}{space 4} .0303507{col 75}{space 3} .0438279
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0016099{col 34}{space 2} .0003295{col 45}{space 1}   -4.89{col 54}{space 3}0.000{col 62}{space 4}-.0022557{col 75}{space 3}-.0009641
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0966756{col 34}{space 2} .0142166{col 45}{space 1}    6.80{col 54}{space 3}0.000{col 62}{space 4} .0688115{col 75}{space 3} .1245397
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0936324{col 34}{space 2}  .026717{col 45}{space 1}   -3.50{col 54}{space 3}0.000{col 62}{space 4}-.1459967{col 75}{space 3} -.041268
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .1226168{col 34}{space 2} .0166362{col 45}{space 1}    7.37{col 54}{space 3}0.000{col 62}{space 4} .0900105{col 75}{space 3} .1552231
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2}-.0020672{col 34}{space 2} .0002829{col 45}{space 1}   -7.31{col 54}{space 3}0.000{col 62}{space 4}-.0026215{col 75}{space 3}-.0015128
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0589724{col 34}{space 2} .0122259{col 45}{space 1}    4.82{col 54}{space 3}0.000{col 62}{space 4} .0350101{col 75}{space 3} .0829347
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0018698{col 34}{space 2}  .001041{col 45}{space 1}   -1.80{col 54}{space 3}0.072{col 62}{space 4}-.0039101{col 75}{space 3} .0001704
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.0871425{col 34}{space 2} .0305926{col 45}{space 1}   -2.85{col 54}{space 3}0.004{col 62}{space 4}-.1471029{col 75}{space 3}-.0271822
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} 1.000893{col 34}{space 2} .0970839{col 45}{space 1}   10.31{col 54}{space 3}0.000{col 62}{space 4} .8106116{col 75}{space 3} 1.191174
{txt}{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}/lnalpha {c |}{col 22}{res}{space 2}-2.323933{col 34}{space 2} .3194947{col 62}{space 4}-2.950131{col 75}{space 3}-1.697735
{txt}{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
               alpha {c |}{col 22}{res}{space 2} .0978878{col 34}{space 2} .0312746{col 62}{space 4} .0523328{col 75}{space 3} .1830978
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{txt}LR test of alpha=0: {help j_chibar##|_new:chibar2(01) = }{res}1.1e+04{col 56}{txt}Prob >= chibar2 = {res}0.000
{txt}
{com}. est sto m5
{txt}
{com}. meglm  $depvar2 $indep m1_* || idcode:, family(poisson) link(log) vce(robust)
{res}{txt}{p 0 6 2}
note: wage has noncount values;{break}
you are responsible for the
family(poisson) interpretation
{p_end}
Fitting fixed-effects model:

Iteration 0:{space 2}Log likelihood = {res:-76896.074}  
Iteration 1:{space 2}Log likelihood = {res:-67393.476}  
Iteration 2:{space 2}Log likelihood = {res:-67296.106}  
Iteration 3:{space 2}Log likelihood = {res:-67296.067}  
Iteration 4:{space 2}Log likelihood = {res:-67296.067}  

Refining starting values:

Grid node 0:{space 2}Log likelihood = {res:-64102.227}

Refining starting values (unscaled likelihoods):

Grid node 0:{space 2}Log likelihood = {res:-64102.227}

Fitting full model:
{res}
{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-64102.227}  (not concave)
Iteration 1:{space 2}Log pseudolikelihood = {res:-62172.966}  (not concave)
Iteration 2:{space 2}Log pseudolikelihood = {res:-61596.534}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-61575.915}  
Iteration 4:{space 2}Log pseudolikelihood = {res:-61573.425}  
Iteration 5:{space 2}Log pseudolikelihood = {res:-61573.423}  
{res}
{txt}Mixed-effects GLM{col 49}{txt}Number of obs{col 67}={res}{col 69}    27,541
{txt}Family: {txt}Poisson
{txt}Link:   {txt}Log
{txt}Group variable: {res}idcode{col 49}{txt}Number of groups{col 67}={res}{col 69}     4,147

{col 49}{txt}Obs per group:
{col 63}{txt}min{col 67}={res}{col 69}         2
{col 63}{txt}avg{col 67}={res}{col 69}       6.6
{col 63}{txt}max{col 67}={res}{col 69}        15

{txt}Integration method: {res}mvaghermite{col 49}{txt}Integration pts.{col 67}={col 78}{res}7

{col 49}{txt}Wald chi2({res}11{txt}){col 67}={res}{col 70}  3074.55
{txt}Log pseudolikelihood = {res}-61573.423{col 49}{txt}Prob > chi2{col 67}={res}{col 73}0.0000
{txt}{ralign 86:(Std. err. adjusted for {res:4,147} clusters in {res:idcode})}
{hline 21}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 22}{c |}{col 34}    Robust
{col 1}                wage{col 22}{c |} Coefficient{col 34}  std. err.{col 46}      z{col 54}   P>|z|{col 62}     [95% con{col 75}f. interval]
{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 17}age {c |}{col 22}{res}{space 2} .0282683{col 34}{space 2} .0069444{col 45}{space 1}    4.07{col 54}{space 3}0.000{col 62}{space 4} .0146575{col 75}{space 3} .0418791
{txt}{space 20} {c |}
{space 9}c.age#c.age {c |}{col 22}{res}{space 2}-.0001604{col 34}{space 2} .0001231{col 45}{space 1}   -1.30{col 54}{space 3}0.193{col 62}{space 4}-.0004016{col 75}{space 3} .0000808
{txt}{space 20} {c |}
{space 14}tenure {c |}{col 22}{res}{space 2} .0370987{col 34}{space 2} .0034354{col 45}{space 1}   10.80{col 54}{space 3}0.000{col 62}{space 4} .0303655{col 75}{space 3}  .043832
{txt}{space 20} {c |}
{space 3}c.tenure#c.tenure {c |}{col 22}{res}{space 2}-.0016102{col 34}{space 2} .0003288{col 45}{space 1}   -4.90{col 54}{space 3}0.000{col 62}{space 4}-.0022546{col 75}{space 3}-.0009658
{txt}{space 20} {c |}
{space 13}1.white {c |}{col 22}{res}{space 2} .0933957{col 34}{space 2} .0127849{col 45}{space 1}    7.31{col 54}{space 3}0.000{col 62}{space 4} .0683378{col 75}{space 3} .1184536
{txt}{space 13}1.south {c |}{col 22}{res}{space 2}-.0936596{col 34}{space 2} .0266257{col 45}{space 1}   -3.52{col 54}{space 3}0.000{col 62}{space 4}-.1458449{col 75}{space 3}-.0414743
{txt}{space 14}m1_age {c |}{col 22}{res}{space 2} .1081176{col 34}{space 2} .0155615{col 45}{space 1}    6.95{col 54}{space 3}0.000{col 62}{space 4} .0776177{col 75}{space 3} .1386175
{txt}{space 6}m1_c_age_c_age {c |}{col 22}{res}{space 2} -.001863{col 34}{space 2} .0002656{col 45}{space 1}   -7.01{col 54}{space 3}0.000{col 62}{space 4}-.0023835{col 75}{space 3}-.0013425
{txt}{space 11}m1_tenure {c |}{col 22}{res}{space 2} .0628557{col 34}{space 2} .0101888{col 45}{space 1}    6.17{col 54}{space 3}0.000{col 62}{space 4}  .042886{col 75}{space 3} .0828253
{txt}m1_c_tenure_c_tenure {c |}{col 22}{res}{space 2}-.0020536{col 34}{space 2} .0008673{col 45}{space 1}   -2.37{col 54}{space 3}0.018{col 62}{space 4}-.0037536{col 75}{space 3}-.0003537
{txt}{space 9}m1__1_south {c |}{col 22}{res}{space 2}-.0870278{col 34}{space 2} .0296835{col 45}{space 1}   -2.93{col 54}{space 3}0.003{col 62}{space 4}-.1452063{col 75}{space 3}-.0288493
{txt}{space 15}_cons {c |}{col 22}{res}{space 2} .9528828{col 34}{space 2} .0971385{col 45}{space 1}    9.81{col 54}{space 3}0.000{col 62}{space 4} .7624949{col 75}{space 3} 1.143271
{txt}{hline 21}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}{res}idcode              {col 22}{txt}{c |}
{space 11}var(_cons){c |}{col 22}{res}{space 2} .0946486{col 34}{space 2} .0038043{col 62}{space 4} .0874784{col 75}{space 3} .1024066
{txt}{hline 21}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. est sto m6
{txt}
{com}. 
. esttab m1 m2 m3 m4 m5 m6 , drop(0.*) nogaps ///
>                         mtitle("xtpoisson FE" "xtpoisson RE" "xthybrid" ///
>                         "CRE Poisson" "CRE xtpoisson" "CRE meglm") b(3) t ///
>                         rename(R__white 1.white  ///
>                         W__age    age W__age_sqr c.age#c.age ///
>                         W__tenure tenure  W__tenure_sqr c.tenure#c.tenure W__south   1.south ///
>                         D__age    m1_age D__age_sqr m1_c_age_c_age ///
>                         D__tenure m1_tenure  D__tenure_sqr m1_c_tenure_c_tenure D__south   m1__1_south) ///
>                         nose nostar  tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}6{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(1){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(2){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(3){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(4){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(5){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(6){c )-}\\
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtpoisson FE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtpoisson RE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xthybrid{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE Poisson{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE xtpoisson{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE meglm{c )-}\\
\hline
wage        &            &            &            &            &            &            \\
age         &       0.029&       0.040&       0.028&       0.027&       0.028&       0.028\\
            &      (4.14)&      (5.76)&      (4.07)&      (3.92)&      (4.07)&      (4.07)\\
c.age#c.age &      -0.000&      -0.000&      -0.000&      -0.000&      -0.000&      -0.000\\
            &     (-1.35)&     (-2.97)&     (-1.30)&     (-1.23)&     (-1.30)&     (-1.30)\\
tenure      &       0.037&       0.045&       0.037&       0.036&       0.037&       0.037\\
            &     (10.89)&     (13.24)&     (10.80)&     (10.07)&     (10.79)&     (10.80)\\
c.tenure#c.tenure&      -0.002&      -0.002&      -0.002&      -0.002&      -0.002&      -0.002\\
            &     (-4.94)&     (-6.64)&     (-4.90)&     (-4.57)&     (-4.89)&     (-4.90)\\
1.white     &       0.000&       0.095&       0.093&       0.104&       0.097&       0.093\\
            &         (.)&      (6.82)&      (7.31)&      (6.78)&      (6.80)&      (7.31)\\
1.south     &      -0.093&      -0.142&      -0.094&      -0.100&      -0.094&      -0.094\\
            &     (-3.56)&     (-9.33)&     (-3.52)&     (-3.29)&     (-3.50)&     (-3.52)\\
m1\_age      &            &            &       0.108&       0.152&       0.123&       0.108\\
            &            &            &      (6.95)&      (7.47)&      (7.37)&      (6.95)\\
m1\_c\_age\_c\_age&            &            &      -0.002&      -0.003&      -0.002&      -0.002\\
            &            &            &     (-7.01)&     (-7.35)&     (-7.31)&     (-7.01)\\
m1\_tenure   &            &            &       0.063&       0.047&       0.059&       0.063\\
            &            &            &      (6.17)&      (3.10)&      (4.82)&      (6.17)\\
m1\_c\_tenure\_c\_tenure&            &            &      -0.002&      -0.001&      -0.002&      -0.002\\
            &            &            &     (-2.37)&     (-0.95)&     (-1.80)&     (-2.37)\\
m1\_\_1\_south &            &            &      -0.087&      -0.081&      -0.087&      -0.087\\
            &            &            &     (-2.93)&     (-2.33)&     (-2.85)&     (-2.93)\\
\_cons      &            &       0.837&      -0.646&       1.007&       1.001&       0.953\\
            &            &      (8.77)&     (-3.35)&     (10.42)&     (10.31)&      (9.81)\\
\hline
/           &            &            &            &            &            &            \\
lnalpha     &            &      -2.238&            &            &      -2.324&            \\
            &            &     (-7.40)&            &            &     (-7.27)&            \\
var(\_cons[idcode])&            &            &            &            &            &       0.095\\
            &            &            &            &            &            &     (24.88)\\
\hline
var(\_cons[idcode])&            &            &            &            &            &            \\
\_cons      &            &            &       0.095&            &            &            \\
            &            &            &     (24.88)&            &            &            \\
\hline
\(N\)       &       27541&       27541&       27541&       27541&       27541&       27541\\
\hline\hline
\multicolumn{c -(}7{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}.                         
. 
. qui:ppmlhdfe $depvar2 $indep, abs(idcode) vce(robust) d
{txt}
{com}. margins, dydx(age tenure) post  
{res}
{txt}{col 1}Average marginal effects{col 57}{lalign 13:Number of obs}{col 70} = {res}{ralign 6:27,541}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Predicted mean of wage, predict()}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2} .1138223{col 26}{space 2} .0064437{col 37}{space 1}   17.66{col 46}{space 3}0.000{col 54}{space 4} .1011929{col 67}{space 3} .1264517
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .1501927{col 26}{space 2} .0089418{col 37}{space 1}   16.80{col 46}{space 3}0.000{col 54}{space 4} .1326671{col 67}{space 3} .1677183
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m1mfx
{txt}
{com}. qui:cre, abs(idcode): poisson $depvar2 $indep, cluster(idcode)
{txt}
{com}. margins, dydx(age tenure) post  
{res}
{txt}{col 1}Average marginal effects{col 57}{lalign 13:Number of obs}{col 70} = {res}{ralign 6:27,541}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Predicted number of events, predict()}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2} .1097213{col 26}{space 2} .0084687{col 37}{space 1}   12.96{col 46}{space 3}0.000{col 54}{space 4}  .093123{col 67}{space 3} .1263196
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .1469907{col 26}{space 2} .0120138{col 37}{space 1}   12.24{col 46}{space 3}0.000{col 54}{space 4}  .123444{col 67}{space 3} .1705374
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m2mfx
{txt}
{com}. qui:meglm  $depvar2 $indep m1_* || idcode:, family(poisson) link(log) vce(robust)
{txt}
{com}. margins, dydx(age tenure) post  
{res}
{txt}{col 1}Average marginal effects{col 57}{lalign 13:Number of obs}{col 70} = {res}{ralign 6:27,541}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Marginal predicted mean, predict()}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2} .1142469{col 26}{space 2} .0084652{col 37}{space 1}   13.50{col 46}{space 3}0.000{col 54}{space 4} .0976553{col 67}{space 3} .1308385
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .1513167{col 26}{space 2} .0118879{col 37}{space 1}   12.73{col 46}{space 3}0.000{col 54}{space 4} .1280168{col 67}{space 3} .1746167
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m3mfx
{txt}
{com}. 
. esttab m1mfx m2mfx m3mfx,  nogaps ///
>                         mtitle("ppmlhdfe" "CRE poisson" "CRE meglm") b(3) t ///
>                         nose nostar   tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}3{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(1){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(2){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(3){c )-}\\
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}ppmlhdfe{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE poisson{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE meglm{c )-}\\
\hline
age         &       0.114&       0.110&       0.114\\
            &     (17.66)&     (12.96)&     (13.50)\\
tenure      &       0.150&       0.147&       0.151\\
            &     (16.80)&     (12.24)&     (12.73)\\
\hline
\(N\)       &       27541&       27541&       27541\\
\hline\hline
\multicolumn{c -(}4{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}. 
.                         
.                         
. ** logit
. 
. webuse nlswork, clear
{txt}(National Longitudinal Survey of Young Women, 14-24 years old in 1968)

{com}. xtset idcode year
{res}
{col 1}{txt:Panel variable: }{res:idcode}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:year}{txt:, }{res:{bind:68}}{txt: to }{res:{bind:88}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}. gen wage = exp(ln_wage) // Transform log wage to wage for poisson model
{txt}
{com}. gen white = race==1 & race!=.
{txt}
{com}. global depvar1 ln_wage
{txt}
{com}. global depvar2 wage
{txt}
{com}. global depvar3 union
{txt}
{com}. global indep "c.age##c.age c.tenure##c.tenure i.white i.south"
{txt}
{com}. 
. drop if white==. | union==. | age==. | tenure==. | south==.
{txt}(9,527 observations deleted)

{com}. bysort idcode:gen nobs=_N
{txt}
{com}. drop if nobs==1         
{txt}(673 observations deleted)

{com}. bysort idcode:egen sig_union=sd(union)
{txt}
{com}. drop if sig_union==0 | sig_union==.
{txt}(10,812 observations deleted)

{com}. 
. 
. xtlogit $depvar3 $indep, fe  
{txt}note: multiple positive outcomes within groups encountered.
note: {bf:1.white} omitted because of no within-group variance.
{res}
{txt}Iteration 0:{space 2}Log likelihood = {res:-2768.6432}  
Iteration 1:{space 2}Log likelihood = {res:-2760.5738}  
Iteration 2:{space 2}Log likelihood = {res:-2760.5613}  
Iteration 3:{space 2}Log likelihood = {res:-2760.5613}  
{res}
{txt}{col 1}Conditional fixed-effects logistic regression{col 54}{lalign 16:Number of obs}{col 70} = {res}{ralign 6:7,522}
{txt}{col 1}{txt}Group variable: {res}idcode{txt}{col 54}{lalign 16:Number of groups}{col 70} = {res}{ralign 6:1,235}

{txt}{col 54}Obs per group:
{col 54}{ralign 16:min}{col 70} = {res}{ralign 6:2}
{txt}{col 54}{ralign 16:avg}{col 70} = {res}{ralign 6:6.1}
{txt}{col 54}{ralign 16:max}{col 70} = {res}{ralign 6:12}

{txt}{col 54}{lalign 16:LR chi2({res:5})}{col 70} = {res}{ralign 6:111.79}
{txt}{col 1}{lalign 14:Log likelihood}{col 15} = {res}{ralign 10:-2760.5613}{txt}{col 54}{lalign 16:Prob > chi2}{col 70} = {res}{ralign 6:0.0000}

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}            union{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2}-.0228956{col 31}{space 2} .0450781{col 42}{space 1}   -0.51{col 51}{space 3}0.612{col 59}{space 4} -.111247{col 72}{space 3} .0654558
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2} .0003553{col 31}{space 2} .0007244{col 42}{space 1}    0.49{col 51}{space 3}0.624{col 59}{space 4}-.0010644{col 72}{space 3} .0017751
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .1691276{col 31}{space 2} .0222691{col 42}{space 1}    7.59{col 51}{space 3}0.000{col 59}{space 4}  .125481{col 72}{space 3} .2127743
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2}-.0080743{col 31}{space 2} .0014646{col 42}{space 1}   -5.51{col 51}{space 3}0.000{col 59}{space 4}-.0109449{col 72}{space 3}-.0052037
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}        0{col 31}{txt}  (omitted)
{space 10}1.south {c |}{col 19}{res}{space 2}-1.055654{col 31}{space 2} .1765594{col 42}{space 1}   -5.98{col 51}{space 3}0.000{col 59}{space 4}-1.401705{col 72}{space 3}-.7096043
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(age tenure) post
{res}
{txt}{col 1}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:7,522}
{txt}{col 1}Model VCE: {res:OIM}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(union|fixed effect is 0), predict(pu0)}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2}-.0001328{col 26}{space 2} .0014179{col 37}{space 1}   -0.09{col 46}{space 3}0.925{col 54}{space 4}-.0029117{col 67}{space 3} .0026462
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .0227569{col 26}{space 2} .0039842{col 37}{space 1}    5.71{col 46}{space 3}0.000{col 54}{space 4}  .014948{col 67}{space 3} .0305659
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m1mfx
{txt}
{com}. xtlogit $depvar3 $indep, re vce(robust)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-5041.9463}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-4950.2223}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-4950.0695}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-4950.0695}  
{res}
{txt}Fitting full model:

tau = {res} 0.0    {txt}Log pseudolikelihood = {res}-4950.0695
{txt}tau = {res} 0.1    {txt}Log pseudolikelihood = {res}-4884.1704
{txt}tau = {res} 0.2    {txt}Log pseudolikelihood = {res}-4844.4139
{txt}tau = {res} 0.3    {txt}Log pseudolikelihood = {res}-4825.5546
{txt}tau = {res} 0.4    {txt}Log pseudolikelihood = {res}-4825.9432

{txt}Iteration 0:{space 2}Log pseudolikelihood = {res:-4825.5548}  
Iteration 1:{space 2}Log pseudolikelihood = {res:-4821.6487}  
Iteration 2:{space 2}Log pseudolikelihood = {res:-4821.5818}  
Iteration 3:{space 2}Log pseudolikelihood = {res:-4821.5818}  
{res}
{txt}Calculating robust standard errors ...

{col 1}Random-effects logistic regression{col 54}{lalign 16:Number of obs}{col 70} = {res}{ralign 6:7,522}
{txt}{col 1}{txt}Group variable: {res}idcode{txt}{col 54}{lalign 16:Number of groups}{col 70} = {res}{ralign 6:1,235}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 54}Obs per group:
{col 54}{ralign 16:min}{col 70} = {res}{ralign 6:2}
{txt}{col 54}{ralign 16:avg}{col 70} = {res}{ralign 6:6.1}
{txt}{col 54}{ralign 16:max}{col 70} = {res}{ralign 6:12}

{txt}{col 1}Integration method: {res:mvaghermite}{col 54}{lalign 16:Integration pts.}{col 70} = {res}{ralign 6:12}

{txt}{col 54}{lalign 16:Wald chi2({res:6})}{col 70} = {res}{ralign 6:118.03}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-4821.5818}{txt}{col 54}{lalign 16:Prob > chi2}{col 70} = {res}{ralign 6:0.0000}

{txt}{ralign 83:(Std. err. adjusted for {res:1,235} clusters in {res:idcode})}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            union{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 14}age {c |}{col 19}{res}{space 2}-.0285387{col 31}{space 2} .0506315{col 42}{space 1}   -0.56{col 51}{space 3}0.573{col 59}{space 4}-.1277746{col 72}{space 3} .0706973
{txt}{space 17} {c |}
{space 6}c.age#c.age {c |}{col 19}{res}{space 2}  .000512{col 31}{space 2} .0008117{col 42}{space 1}    0.63{col 51}{space 3}0.528{col 59}{space 4}-.0010789{col 72}{space 3} .0021029
{txt}{space 17} {c |}
{space 11}tenure {c |}{col 19}{res}{space 2} .1442994{col 31}{space 2} .0215456{col 42}{space 1}    6.70{col 51}{space 3}0.000{col 59}{space 4} .1020708{col 72}{space 3} .1865279
{txt}{space 17} {c |}
c.tenure#c.tenure {c |}{col 19}{res}{space 2} -.007097{col 31}{space 2} .0014378{col 42}{space 1}   -4.94{col 51}{space 3}0.000{col 59}{space 4}-.0099151{col 72}{space 3}-.0042789
{txt}{space 17} {c |}
{space 10}1.white {c |}{col 19}{res}{space 2}-.2365112{col 31}{space 2} .0748528{col 42}{space 1}   -3.16{col 51}{space 3}0.002{col 59}{space 4}  -.38322{col 72}{space 3}-.0898025
{txt}{space 10}1.south {c |}{col 19}{res}{space 2}-.6372643{col 31}{space 2} .0749224{col 42}{space 1}   -8.51{col 51}{space 3}0.000{col 59}{space 4}-.7841095{col 72}{space 3}-.4904192
{txt}{space 12}_cons {c |}{col 19}{res}{space 2}-.0469463{col 31}{space 2} .7716318{col 42}{space 1}   -0.06{col 51}{space 3}0.951{col 59}{space 4}-1.559317{col 72}{space 3} 1.465424
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}/lnsig2u {c |}{col 19}{res}{space 2}-.6038775{col 31}{space 2} .0862053{col 59}{space 4}-.7728368{col 72}{space 3}-.4349183
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |}{col 19}{res}{space 2} .7393833{col 31}{space 2} .0318694{col 59}{space 4} .6794862{col 72}{space 3} .8045605
{txt}              rho {c |}{col 19}{res}{space 2} .1424944{col 31}{space 2} .0105334{col 59}{space 4} .1230689{col 72}{space 3} .1644112
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(age tenure) post
{res}
{txt}{col 1}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:7,522}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(union=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2} .0007594{col 26}{space 2} .0014495{col 37}{space 1}    0.52{col 46}{space 3}0.600{col 54}{space 4}-.0020815{col 67}{space 3} .0036004
{txt}{space 6}tenure {c |}{col 14}{res}{space 2}  .017597{col 26}{space 2} .0024884{col 37}{space 1}    7.07{col 46}{space 3}0.000{col 54}{space 4} .0127199{col 67}{space 3} .0224741
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m2mfx
{txt}
{com}. qui:cre, abs(idcode): logit $depvar3 $indep, cluster(idcode)
{txt}
{com}. margins, dydx(age tenure) post
{res}
{txt}{col 1}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:7,522}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(union), predict()}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2} -.000235{col 26}{space 2} .0019861{col 37}{space 1}   -0.12{col 46}{space 3}0.906{col 54}{space 4}-.0041276{col 67}{space 3} .0036576
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .0203134{col 26}{space 2} .0031523{col 37}{space 1}    6.44{col 46}{space 3}0.000{col 54}{space 4}  .014135{col 67}{space 3} .0264918
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m3mfx
{txt}
{com}. qui:cre, abs(idcode): xtlogit $depvar3 $indep, re vce(robust) 
{txt}
{com}. margins, dydx(age tenure) post
{res}
{txt}{col 1}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:7,522}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(union=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:age tenure}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}age {c |}{col 14}{res}{space 2}-.0002017{col 26}{space 2} .0020044{col 37}{space 1}   -0.10{col 46}{space 3}0.920{col 54}{space 4}-.0041302{col 67}{space 3} .0037268
{txt}{space 6}tenure {c |}{col 14}{res}{space 2} .0207914{col 26}{space 2} .0032165{col 37}{space 1}    6.46{col 46}{space 3}0.000{col 54}{space 4} .0144872{col 67}{space 3} .0270956
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est sto m4mfx
{txt}
{com}. 
. 
. esttab m1mfx m2mfx m3mfx m4mfx, nogaps ///
>                         mtitle("xtlogit FE" "xtlogit RE"  ///
>                         "CRE logit" "CRE xtlogit RE" ) b(3) t ///
>                         nose nostar  tex
{res}
\begin{c -(}tabular{c )-}{c -(}l*{c -(}4{c )-}{c -(}c{c )-}{c )-}
\hline\hline
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(1){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(2){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(3){c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}(4){c )-}\\
            &\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtlogit FE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}xtlogit RE{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE logit{c )-}&\multicolumn{c -(}1{c )-}{c -(}c{c )-}{c -(}CRE xtlogit RE{c )-}\\
\hline
age         &      -0.000&       0.001&      -0.000&      -0.000\\
            &     (-0.09)&      (0.52)&     (-0.12)&     (-0.10)\\
tenure      &       0.023&       0.018&       0.020&       0.021\\
            &      (5.71)&      (7.07)&      (6.44)&      (6.46)\\
\hline
\(N\)       &        7522&        7522&        7522&        7522\\
\hline\hline
\multicolumn{c -(}5{c )-}{c -(}l{c )-}{c -(}\footnotesize \textit{c -(}t{c )-} statistics in parentheses{c )-}\\
\end{c -(}tabular{c )-}
{txt}
{com}.                         
. log close                       
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\frios\Documents\cre_stata\sim_v2/main_log.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 3 Jun 2025, 12:15:27
{txt}{.-}
{smcl}
{txt}{sf}{ul off}{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\frios\Documents\cre_stata\sim_v2/main_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 3 Jun 2025, 12:15:27
{txt}
{com}. version 19
{txt}
{com}. display "***********************************************" _n ///
>                 " ------------- Simulation 1fe    --------------" _n ///
>                 "***********************************************"
{res}***********************************************
 ------------- Simulation 1fe    --------------
***********************************************
{txt}
{com}. // setup
. net install parallel, from(https://raw.github.com/gvegayon/parallel/stable/) replace
checking {hilite:parallel} consistency and verifying not already installed...
all files already exist and are up to date.
{txt}
{com}. ssc install estout
{txt}checking {hilite:estout} consistency and verifying not already installed...
all files already exist and are up to date.

{com}. set scheme stsj
{txt}
{com}.  
. // Simulation program
. capture program drop cre_sim_1fe
{txt}
{com}. program define cre_sim_1fe, eclass
{txt}  1{com}.         syntax, [model(int 1)]
{txt}  2{com}.         clear
{txt}  3{com}.         set obs 1000
{txt}  4{com}.         // Generates indicators for the two fixed effects
.         gen id1 = runiformint(1,100)
{txt}  5{com}.         // fixed effects are assumed follow a uniform distribution
.         gen c1 = runiform(-.5,.5)
{txt}  6{com}.         bysort id1:replace c1=c1[1]
{txt}  7{com}.         // explanatory variables are correlated with the fixed effects, 
.         // thus correlated with each other
.         gen x1 = runiform(-1,1)+invnormal(c1+.5)
{txt}  8{com}.         gen x2 = runiform(-1,1)-invnormal(c1+.5)
{txt}  9{com}.         // and the expected latent ey_star is a linear combination x1, x2, c1, and c2
.         gen y_star = 1 + x1 + x2 + c1 
{txt} 10{com}.         if `model'==1 {c -(}
{txt} 11{com}.                 // probit
.                 gen y_probit = 1*(y_star-1+rnormal()>0)
{txt} 12{com}.                 probit y_probit x1 x2 c1 
{txt} 13{com}.                 margins, dydx(x1 x2) post
{txt} 14{com}.                 matrix b_true = _b[x1],_b[x2]
{txt} 15{com}.                 probit y_probit x1 x2
{txt} 16{com}.                 margins, dydx(x1 x2) post
{txt} 17{com}.                 matrix b_nofe = _b[x1],_b[x2]
{txt} 18{com}.                 cre, abs(id1 ): probit y_probit x1 x2
{txt} 19{com}.                 margins, dydx(x1 x2) post
{txt} 20{com}.                 matrix b_cre = _b[x1],_b[x2]
{txt} 21{com}.         {c )-}
{txt} 22{com}.         else if `model'==2 {c -(}
{txt} 23{com}.                 // fractional probit
.                 gen y_fprobit = normal(y_star-1+rnormal())
{txt} 24{com}.                 fracreg probit y_fprobit x1 x2 c1 
{txt} 25{com}.                 margins, dydx(x1 x2)
{txt} 26{com}.                 matrix b_true = _b[x1],_b[x2]
{txt} 27{com}.                 fracreg probit y_fprobit x1 x2
{txt} 28{com}.                 margins, dydx(x1 x2)
{txt} 29{com}.                 matrix b_nofe = _b[x1],_b[x2]
{txt} 30{com}.                 cre, abs(id1 ): fracreg probit y_fprobit  x1 x2
{txt} 31{com}.                 margins, dydx(x1 x2)
{txt} 32{com}.                 matrix b_cre = _b[x1],_b[x2]
{txt} 33{com}.         {c )-}
{txt} 34{com}.         else if `model'==3 {c -(}
{txt} 35{com}.                 // tobit
.                 gen y_tobit = max( y_star + rnormal(),0)
{txt} 36{com}.                 tobit y_tobit x1 x2 c1 , ll(0)
{txt} 37{com}.                 matrix b_true = _b[x1],_b[x2]
{txt} 38{com}.                 tobit y_tobit  x1 x2, ll(0)
{txt} 39{com}.                 matrix b_nofe = _b[x1],_b[x2]
{txt} 40{com}.                 cre, abs(id1 ): tobit y_tobit x1 x2, ll(0)
{txt} 41{com}.                 matrix b_cre = _b[x1],_b[x2]
{txt} 42{com}.         {c )-}
{txt} 43{com}.         else if `model'==4 {c -(}
{txt} 44{com}.                 // poisson
.                 gen y_poisson = rpoisson(exp(y_star))
{txt} 45{com}.                 poisson y_poisson x1 x2 c1  
{txt} 46{com}.                 matrix b_true = _b[x1],_b[x2]
{txt} 47{com}.                 poisson y_poisson  x1 x2
{txt} 48{com}.                 matrix b_nofe = _b[x1],_b[x2]
{txt} 49{com}.                 cre, abs(id1 ): poisson y_poisson x1 x2
{txt} 50{com}.                 matrix b_cre = _b[x1],_b[x2]
{txt} 51{com}.                 
.         {c )-}
{txt} 52{com}. 
. matrix coleq b_true = true
{txt} 53{com}. matrix coleq b_nofe = nofe
{txt} 54{com}. matrix coleq b_cre  = cre 
{txt} 55{com}. matrix colname b_true = x1 x2
{txt} 56{com}. matrix colname b_nofe = x1 x2
{txt} 57{com}. matrix colname b_cre = x1 x2
{txt} 58{com}. matrix b = b_true,b_nofe,b_cre
{txt} 59{com}. 
. ereturn post b
{txt} 60{com}. 
. end
{txt}
{com}.  
.  
.  
. parallel initialize 16
{res}{text:N Child processes}: {result:16}
{text:Stata dir:} {result: C:\Program Files\StataNow19/StataMP-64.exe}
{txt}
{com}. global seed 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
{txt}
{com}. parallel sim , reps(10000) seeds($seed): cre_sim_1fe, model(1)
{res}{hline 80}{break}{result:Exporting the following program(s): cre_sim_1fe}

{txt}cre_sim_1fe, eclass:
{res}  1.         syntax, [model(int 1)]
  2.         clear
  3.         set obs 1000
  4.         gen id1 = runiformint(1,100)
  5.         gen c1 = runiform(-.5,.5)
  6.         bysort id1:replace c1=c1[1]
  7.         gen x1 = runiform(-1,1)+invnormal(c1+.5)
  8.         gen x2 = runiform(-1,1)-invnormal(c1+.5)
  9.         gen y_star = 1 + x1 + x2 + c1
 10.         if `model'==1 {c -(}
 11.                 gen y_probit = 1*(y_star-1+rnormal()>0)
 12.                 probit y_probit x1 x2 c1
 13.                 margins, dydx(x1 x2) post
 14.                 matrix b_true = _b[x1],_b[x2]
 15.                 probit y_probit x1 x2
 16.                 margins, dydx(x1 x2) post
 17.                 matrix b_nofe = _b[x1],_b[x2]
 18.                 cre, abs(id1 ): probit y_probit x1 x2
 19.                 margins, dydx(x1 x2) post
 20.                 matrix b_cre = _b[x1],_b[x2]
 21.         {c )-}
 22.         else if `model'==2 {c -(}
 23.                 gen y_fprobit = normal(y_star-1+rnormal())
 24.                 fracreg probit y_fprobit x1 x2 c1
 25.                 margins, dydx(x1 x2)
 26.                 matrix b_true = _b[x1],_b[x2]
 27.                 fracreg probit y_fprobit x1 x2
 28.                 margins, dydx(x1 x2)
 29.                 matrix b_nofe = _b[x1],_b[x2]
 30.                 cre, abs(id1 ): fracreg probit y_fprobit x1 x2
 31.                 margins, dydx(x1 x2)
 32.                 matrix b_cre = _b[x1],_b[x2]
 33.         {c )-}
 34.         else if `model'==3 {c -(}
 35.                 gen y_tobit = max( y_star + rnormal(),0)
 36.                 tobit y_tobit x1 x2 c1 , ll(0)
 37.                 matrix b_true = _b[x1],_b[x2]
 38.                 tobit y_tobit x1 x2, ll(0)
 39.                 matrix b_nofe = _b[x1],_b[x2]
 40.                 cre, abs(id1 ): tobit y_tobit x1 x2, ll(0)
 41.                 matrix b_cre = _b[x1],_b[x2]
 42.         {c )-}
 43.         else if `model'==4 {c -(}
 44.                 gen y_poisson = rpoisson(exp(y_star))
 45.                 poisson y_poisson x1 x2 c1
 46.                 matrix b_true = _b[x1],_b[x2]
 47.                 poisson y_poisson x1 x2
 48.                 matrix b_nofe = _b[x1],_b[x2]
 49.                 cre, abs(id1 ): poisson y_poisson x1 x2
 50.                 matrix b_cre = _b[x1],_b[x2]
 51.         {c )-}
 52. matrix coleq b_true = true
 53. matrix coleq b_nofe = nofe
 54. matrix coleq b_cre = cre
 55. matrix colname b_true = x1 x2
 56. matrix colname b_nofe = x1 x2
 57. matrix colname b_cre = x1 x2
 58. matrix b = b_true,b_nofe,b_cre
 59. ereturn post b
{hline 80}
{hline 80}
{result:Parallel Computing with Stata}
{text:Child processes:} {result:16}
{text:pll_id         :} {result:vj9jyd1gb1}
{text:Running at     :} {result:C:\Users\frios\Documents\cre_stata}
{text:Randtype       :} {result:datetime}
{txt}{it:Waiting for the child processes to finish...}
{it:child process 0011} {text:has exited without error...}
{it:child process 0008} {text:has exited without error...}
{it:child process 0009} {text:has exited without error...}
{it:child process 0014} {text:has exited without error...}
{it:child process 0016} {text:has exited without error...}
{it:child process 0005} {text:has exited without error...}
{it:child process 0013} {text:has exited without error...}
{it:child process 0010} {text:has exited without error...}
{it:child process 0012} {text:has exited without error...}
{it:child process 0015} {text:has exited without error...}
{it:child process 0004} {text:has exited without error...}
{it:child process 0006} {text:has exited without error...}
{it:child process 0003} {text:has exited without error...}
{it:child process 0001} {text:has exited without error...}
{it:child process 0007} {text:has exited without error...}
{it:child process 0002} {text:has exited without error...}
{hline 80}{break}{text:Enter -{stata parallel printlog 1, e(vj9jyd1gb1):parallel printlog #}- to checkout logfiles.}{break}{hline 80}
{res}{txt}
{com}. save sim_v2/cre_probit, replace
{txt}{p 0 4 2}
file {bf}
sim_v2/cre_probit.dta{rm}
saved
{p_end}

{com}. 
. parallel sim , reps(10000) seeds($seed): cre_sim_1fe, model(2)
{res}{hline 80}{break}{result:Exporting the following program(s): cre_sim_1fe}

{txt}cre_sim_1fe, eclass:
{res}  1.         syntax, [model(int 1)]
  2.         clear
  3.         set obs 1000
  4.         gen id1 = runiformint(1,100)
  5.         gen c1 = runiform(-.5,.5)
  6.         bysort id1:replace c1=c1[1]
  7.         gen x1 = runiform(-1,1)+invnormal(c1+.5)
  8.         gen x2 = runiform(-1,1)-invnormal(c1+.5)
  9.         gen y_star = 1 + x1 + x2 + c1
 10.         if `model'==1 {c -(}
 11.                 gen y_probit = 1*(y_star-1+rnormal()>0)
 12.                 probit y_probit x1 x2 c1
 13.                 margins, dydx(x1 x2) post
 14.                 matrix b_true = _b[x1],_b[x2]
 15.                 probit y_probit x1 x2
 16.                 margins, dydx(x1 x2) post
 17.                 matrix b_nofe = _b[x1],_b[x2]
 18.                 cre, abs(id1 ): probit y_probit x1 x2
 19.                 margins, dydx(x1 x2) post
 20.                 matrix b_cre = _b[x1],_b[x2]
 21.         {c )-}
 22.         else if `model'==2 {c -(}
 23.                 gen y_fprobit = normal(y_star-1+rnormal())
 24.                 fracreg probit y_fprobit x1 x2 c1
 25.                 margins, dydx(x1 x2)
 26.                 matrix b_true = _b[x1],_b[x2]
 27.                 fracreg probit y_fprobit x1 x2
 28.                 margins, dydx(x1 x2)
 29.                 matrix b_nofe = _b[x1],_b[x2]
 30.                 cre, abs(id1 ): fracreg probit y_fprobit x1 x2
 31.                 margins, dydx(x1 x2)
 32.                 matrix b_cre = _b[x1],_b[x2]
 33.         {c )-}
 34.         else if `model'==3 {c -(}
 35.                 gen y_tobit = max( y_star + rnormal(),0)
 36.                 tobit y_tobit x1 x2 c1 , ll(0)
 37.                 matrix b_true = _b[x1],_b[x2]
 38.                 tobit y_tobit x1 x2, ll(0)
 39.                 matrix b_nofe = _b[x1],_b[x2]
 40.                 cre, abs(id1 ): tobit y_tobit x1 x2, ll(0)
 41.                 matrix b_cre = _b[x1],_b[x2]
 42.         {c )-}
 43.         else if `model'==4 {c -(}
 44.                 gen y_poisson = rpoisson(exp(y_star))
 45.                 poisson y_poisson x1 x2 c1
 46.                 matrix b_true = _b[x1],_b[x2]
 47.                 poisson y_poisson x1 x2
 48.                 matrix b_nofe = _b[x1],_b[x2]
 49.                 cre, abs(id1 ): poisson y_poisson x1 x2
 50.                 matrix b_cre = _b[x1],_b[x2]
 51.         {c )-}
 52. matrix coleq b_true = true
 53. matrix coleq b_nofe = nofe
 54. matrix coleq b_cre = cre
 55. matrix colname b_true = x1 x2
 56. matrix colname b_nofe = x1 x2
 57. matrix colname b_cre = x1 x2
 58. matrix b = b_true,b_nofe,b_cre
 59. ereturn post b
{hline 80}
{hline 80}
{result:Parallel Computing with Stata}
{text:Child processes:} {result:16}
{text:pll_id         :} {result:ho26te4xi2}
{text:Running at     :} {result:C:\Users\frios\Documents\cre_stata}
{text:Randtype       :} {result:datetime}
{txt}{it:Waiting for the child processes to finish...}
{it:child process 0015} {text:has exited without error...}
{it:child process 0007} {text:has exited without error...}
{it:child process 0016} {text:has exited without error...}
{it:child process 0014} {text:has exited without error...}
{it:child process 0008} {text:has exited without error...}
{it:child process 0009} {text:has exited without error...}
{it:child process 0006} {text:has exited without error...}
{it:child process 0011} {text:has exited without error...}
{it:child process 0012} {text:has exited without error...}
{it:child process 0013} {text:has exited without error...}
{it:child process 0010} {text:has exited without error...}
{it:child process 0004} {text:has exited without error...}
{it:child process 0002} {text:has exited without error...}
{it:child process 0005} {text:has exited without error...}
{it:child process 0001} {text:has exited without error...}
{it:child process 0003} {text:has exited without error...}
{hline 80}{break}{text:Enter -{stata parallel printlog 1, e(ho26te4xi2):parallel printlog #}- to checkout logfiles.}{break}{hline 80}
{res}{txt}
{com}. save sim_v2/cre_fprobit, replace
{txt}{p 0 4 2}
file {bf}
sim_v2/cre_fprobit.dta{rm}
saved
{p_end}

{com}. 
. parallel sim , reps(10000) seeds($seed): cre_sim_1fe, model(3)
{res}{hline 80}{break}{result:Exporting the following program(s): cre_sim_1fe}

{txt}cre_sim_1fe, eclass:
{res}  1.         syntax, [model(int 1)]
  2.         clear
  3.         set obs 1000
  4.         gen id1 = runiformint(1,100)
  5.         gen c1 = runiform(-.5,.5)
  6.         bysort id1:replace c1=c1[1]
  7.         gen x1 = runiform(-1,1)+invnormal(c1+.5)
  8.         gen x2 = runiform(-1,1)-invnormal(c1+.5)
  9.         gen y_star = 1 + x1 + x2 + c1
 10.         if `model'==1 {c -(}
 11.                 gen y_probit = 1*(y_star-1+rnormal()>0)
 12.                 probit y_probit x1 x2 c1
 13.                 margins, dydx(x1 x2) post
 14.                 matrix b_true = _b[x1],_b[x2]
 15.                 probit y_probit x1 x2
 16.                 margins, dydx(x1 x2) post
 17.                 matrix b_nofe = _b[x1],_b[x2]
 18.                 cre, abs(id1 ): probit y_probit x1 x2
 19.                 margins, dydx(x1 x2) post
 20.                 matrix b_cre = _b[x1],_b[x2]
 21.         {c )-}
 22.         else if `model'==2 {c -(}
 23.                 gen y_fprobit = normal(y_star-1+rnormal())
 24.                 fracreg probit y_fprobit x1 x2 c1
 25.                 margins, dydx(x1 x2)
 26.                 matrix b_true = _b[x1],_b[x2]
 27.                 fracreg probit y_fprobit x1 x2
 28.                 margins, dydx(x1 x2)
 29.                 matrix b_nofe = _b[x1],_b[x2]
 30.                 cre, abs(id1 ): fracreg probit y_fprobit x1 x2
 31.                 margins, dydx(x1 x2)
 32.                 matrix b_cre = _b[x1],_b[x2]
 33.         {c )-}
 34.         else if `model'==3 {c -(}
 35.                 gen y_tobit = max( y_star + rnormal(),0)
 36.                 tobit y_tobit x1 x2 c1 , ll(0)
 37.                 matrix b_true = _b[x1],_b[x2]
 38.                 tobit y_tobit x1 x2, ll(0)
 39.                 matrix b_nofe = _b[x1],_b[x2]
 40.                 cre, abs(id1 ): tobit y_tobit x1 x2, ll(0)
 41.                 matrix b_cre = _b[x1],_b[x2]
 42.         {c )-}
 43.         else if `model'==4 {c -(}
 44.                 gen y_poisson = rpoisson(exp(y_star))
 45.                 poisson y_poisson x1 x2 c1
 46.                 matrix b_true = _b[x1],_b[x2]
 47.                 poisson y_poisson x1 x2
 48.                 matrix b_nofe = _b[x1],_b[x2]
 49.                 cre, abs(id1 ): poisson y_poisson x1 x2
 50.                 matrix b_cre = _b[x1],_b[x2]
 51.         {c )-}
 52. matrix coleq b_true = true
 53. matrix coleq b_nofe = nofe
 54. matrix coleq b_cre = cre
 55. matrix colname b_true = x1 x2
 56. matrix colname b_nofe = x1 x2
 57. matrix colname b_cre = x1 x2
 58. matrix b = b_true,b_nofe,b_cre
 59. ereturn post b
{hline 80}
{hline 80}
{result:Parallel Computing with Stata}
{text:Child processes:} {result:16}
{text:pll_id         :} {result:jknlngfj13}
{text:Running at     :} {result:C:\Users\frios\Documents\cre_stata}
{text:Randtype       :} {result:datetime}
{txt}{it:Waiting for the child processes to finish...}
{it:child process 0011} {text:has exited without error...}
{it:child process 0004} {text:has exited without error...}
{it:child process 0010} {text:has exited without error...}
{it:child process 0006} {text:has exited without error...}
{it:child process 0007} {text:has exited without error...}
{it:child process 0009} {text:has exited without error...}
{it:child process 0013} {text:has exited without error...}
{it:child process 0014} {text:has exited without error...}
{it:child process 0005} {text:has exited without error...}
{it:child process 0008} {text:has exited without error...}
{it:child process 0012} {text:has exited without error...}
{it:child process 0015} {text:has exited without error...}
{it:child process 0016} {text:has exited without error...}
{it:child process 0003} {text:has exited without error...}
{it:child process 0001} {text:has exited without error...}
{it:child process 0002} {text:has exited without error...}
{hline 80}{break}{text:Enter -{stata parallel printlog 1, e(jknlngfj13):parallel printlog #}- to checkout logfiles.}{break}{hline 80}
{res}{txt}
{com}. save sim_v2/cre_tobit, replace
{txt}{p 0 4 2}
file {bf}
sim_v2/cre_tobit.dta{rm}
saved
{p_end}

{com}. 
. parallel sim , reps(10000) seeds($seed): cre_sim_1fe, model(4)
{res}{hline 80}{break}{result:Exporting the following program(s): cre_sim_1fe}

{txt}cre_sim_1fe, eclass:
{res}  1.         syntax, [model(int 1)]
  2.         clear
  3.         set obs 1000
  4.         gen id1 = runiformint(1,100)
  5.         gen c1 = runiform(-.5,.5)
  6.         bysort id1:replace c1=c1[1]
  7.         gen x1 = runiform(-1,1)+invnormal(c1+.5)
  8.         gen x2 = runiform(-1,1)-invnormal(c1+.5)
  9.         gen y_star = 1 + x1 + x2 + c1
 10.         if `model'==1 {c -(}
 11.                 gen y_probit = 1*(y_star-1+rnormal()>0)
 12.                 probit y_probit x1 x2 c1
 13.                 margins, dydx(x1 x2) post
 14.                 matrix b_true = _b[x1],_b[x2]
 15.                 probit y_probit x1 x2
 16.                 margins, dydx(x1 x2) post
 17.                 matrix b_nofe = _b[x1],_b[x2]
 18.                 cre, abs(id1 ): probit y_probit x1 x2
 19.                 margins, dydx(x1 x2) post
 20.                 matrix b_cre = _b[x1],_b[x2]
 21.         {c )-}
 22.         else if `model'==2 {c -(}
 23.                 gen y_fprobit = normal(y_star-1+rnormal())
 24.                 fracreg probit y_fprobit x1 x2 c1
 25.                 margins, dydx(x1 x2)
 26.                 matrix b_true = _b[x1],_b[x2]
 27.                 fracreg probit y_fprobit x1 x2
 28.                 margins, dydx(x1 x2)
 29.                 matrix b_nofe = _b[x1],_b[x2]
 30.                 cre, abs(id1 ): fracreg probit y_fprobit x1 x2
 31.                 margins, dydx(x1 x2)
 32.                 matrix b_cre = _b[x1],_b[x2]
 33.         {c )-}
 34.         else if `model'==3 {c -(}
 35.                 gen y_tobit = max( y_star + rnormal(),0)
 36.                 tobit y_tobit x1 x2 c1 , ll(0)
 37.                 matrix b_true = _b[x1],_b[x2]
 38.                 tobit y_tobit x1 x2, ll(0)
 39.                 matrix b_nofe = _b[x1],_b[x2]
 40.                 cre, abs(id1 ): tobit y_tobit x1 x2, ll(0)
 41.                 matrix b_cre = _b[x1],_b[x2]
 42.         {c )-}
 43.         else if `model'==4 {c -(}
 44.                 gen y_poisson = rpoisson(exp(y_star))
 45.                 poisson y_poisson x1 x2 c1
 46.                 matrix b_true = _b[x1],_b[x2]
 47.                 poisson y_poisson x1 x2
 48.                 matrix b_nofe = _b[x1],_b[x2]
 49.                 cre, abs(id1 ): poisson y_poisson x1 x2
 50.                 matrix b_cre = _b[x1],_b[x2]
 51.         {c )-}
 52. matrix coleq b_true = true
 53. matrix coleq b_nofe = nofe
 54. matrix coleq b_cre = cre
 55. matrix colname b_true = x1 x2
 56. matrix colname b_nofe = x1 x2
 57. matrix colname b_cre = x1 x2
 58. matrix b = b_true,b_nofe,b_cre
 59. ereturn post b
{hline 80}
{hline 80}
{result:Parallel Computing with Stata}
{text:Child processes:} {result:16}
{text:pll_id         :} {result:472nexopb4}
{text:Running at     :} {result:C:\Users\frios\Documents\cre_stata}
{text:Randtype       :} {result:datetime}
{txt}{it:Waiting for the child processes to finish...}
{it:child process 0009} {text:has exited without error...}
{it:child process 0012} {text:has exited without error...}
{it:child process 0013} {text:has exited without error...}
{it:child process 0007} {text:has exited without error...}
{it:child process 0015} {text:has exited without error...}
{it:child process 0010} {text:has exited without error...}
{it:child process 0008} {text:has exited without error...}
{it:child process 0011} {text:has exited without error...}
{it:child process 0014} {text:has exited without error...}
{it:child process 0016} {text:has exited without error...}
{it:child process 0002} {text:has exited without error...}
{it:child process 0004} {text:has exited without error...}
{it:child process 0003} {text:has exited without error...}
{it:child process 0005} {text:has exited without error...}
{it:child process 0001} {text:has exited without error...}
{it:child process 0006} {text:has exited without error...}
{hline 80}{break}{text:Enter -{stata parallel printlog 1, e(472nexopb4):parallel printlog #}- to checkout logfiles.}{break}{hline 80}
{res}{txt}
{com}. save sim_v2/cre_poisson, replace
{txt}{p 0 4 2}
file {bf}
sim_v2/cre_poisson.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use sim_v2/cre_probit, clear
{txt}(simulate: cre_sim_1fe)

{com}. two (kdensity  true_b_x1) (kdensity  nofe_b_x1) (kdensity  cre_b_x1 ) , ///
>         legend(order(1 "Unfeasible" 2 "Pool Data no FE" 3 "CRE") col(3)) xtitle("Marginal Effect X1") ///
>         name(f1, replace) title(Probit)
{res}{txt}
{com}. sum true_b_x1   

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}true_b_x1 {c |}{res}     10,000    .2974247    .0182772   .2270267   .3810571
{txt}
{com}. gen mean=r(mean)
{txt}
{com}. 
. foreach i of  varlist *x1 {c -(}
{txt}  2{com}.  gen c`i'=`i'-mean
{txt}  3{com}.  gen c2`i'=abs(`i'-mean)
{txt}  4{com}.  {c )-}
{txt}
{com}. estpost tabstat ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1,  columns(statistics)

{txt}Summary statistics: mean
     for variables: ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(mean)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:ctrue_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 1.64e-09}}}{space 1}
{space 0}{space 0}{ralign 12:c2true_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0145325}}}{space 1}
{space 0}{space 0}{ralign 12:cnofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0351108}}}{space 1}
{space 0}{space 0}{ralign 12:c2nofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0351311}}}{space 1}
{space 0}{space 0}{ralign 12:ccre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.0003396}}}{space 1}
{space 0}{space 0}{ralign 12:c2cre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0164707}}}{space 1}

{com}. est sto m1
{txt}
{com}. 
.         
. use sim_v2/cre_fprobit, clear
{txt}(simulate: cre_sim_1fe)

{com}. two (kdensity  true_b_x1) (kdensity  nofe_b_x1) (kdensity  cre_b_x1 ) , ///
>         legend(order(1 "Unfeasible" 2 "Pool Data no FE" 3 "CRE") col(3)) xtitle("Marginal Effect X1") ///
>         name(f2, replace) title(Fractional Probit)
{res}{txt}
{com}. sum true_b_x1   

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}true_b_x1 {c |}{res}     10,000    .7080092    .0400608   .5697253   .8544991
{txt}
{com}. gen mean=r(mean)
{txt}
{com}. 
. foreach i of  varlist *x1 {c -(}
{txt}  2{com}.  gen c`i'=`i'-mean
{txt}  3{com}.  gen c2`i'=abs(`i'-mean)
{txt}  4{com}.  {c )-}
{txt}
{com}. estpost tabstat ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1,  columns(statistics)

{txt}Summary statistics: mean
     for variables: ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(mean)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:ctrue_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-1.34e-08}}}{space 1}
{space 0}{space 0}{ralign 12:c2true_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0320623}}}{space 1}
{space 0}{space 0}{ralign 12:cnofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0813656}}}{space 1}
{space 0}{space 0}{ralign 12:c2nofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0814786}}}{space 1}
{space 0}{space 0}{ralign 12:ccre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-.0009959}}}{space 1}
{space 0}{space 0}{ralign 12:c2cre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0352013}}}{space 1}

{com}. est sto m2
{txt}
{com}.         
. use sim_v2/cre_tobit, clear
{txt}(simulate: cre_sim_1fe)

{com}. two (kdensity  true_b_x1) (kdensity  nofe_b_x1) (kdensity  cre_b_x1 ) , ///
>         legend(order(1 "Unfeasible" 2 "Pool Data no FE" 3 "CRE") col(3)) xtitle("Marginal Effect X1") ///
>         name(f3, replace) title(Tobit) 
{res}{txt}
{com}. sum true_b_x1   

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}true_b_x1 {c |}{res}     10,000     1.00068    .0558869   .8135458   1.205406
{txt}
{com}. gen mean=r(mean)
{txt}
{com}. 
. foreach i of  varlist *x1 {c -(}
{txt}  2{com}.  gen c`i'=`i'-mean
{txt}  3{com}.  gen c2`i'=abs(`i'-mean)
{txt}  4{com}.  {c )-}
{txt}
{com}. estpost tabstat ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1,  columns(statistics)

{txt}Summary statistics: mean
     for variables: ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(mean)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:ctrue_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-4.30e-08}}}{space 1}
{space 0}{space 0}{ralign 12:c2true_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0446156}}}{space 1}
{space 0}{space 0}{ralign 12:cnofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1202672}}}{space 1}
{space 0}{space 0}{ralign 12:c2nofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1203305}}}{space 1}
{space 0}{space 0}{ralign 12:ccre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0001108}}}{space 1}
{space 0}{space 0}{ralign 12:c2cre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0490576}}}{space 1}

{com}. est sto m3
{txt}
{com}.         
. use sim_v2/cre_poisson, clear
{txt}(simulate: cre_sim_1fe)

{com}. two (kdensity  true_b_x1) (kdensity  nofe_b_x1) (kdensity  cre_b_x1 ) , ///
>         legend(order(1 "Unfeasible" 2 "Pool Data no FE" 3 "CRE") col(3)) xtitle("Marginal Effect X1") ///
>         name(f4, replace) title(Poisson)
{res}{txt}
{com}. sum true_b_x1   

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}true_b_x1 {c |}{res}     10,000    1.000613    .0286047   .8973913   1.102275
{txt}
{com}. gen mean=r(mean)
{txt}
{com}. 
. foreach i of  varlist *x1 {c -(}
{txt}  2{com}.  gen c`i'=`i'-mean
{txt}  3{com}.  gen c2`i'=abs(`i'-mean)
{txt}  4{com}.  {c )-}
{txt}
{com}. estpost tabstat ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1,  columns(statistics)

{txt}Summary statistics: mean
     for variables: ctrue_b_x1 c2true_b_x1 cnofe_b_x1 c2nofe_b_x1 ccre_b_x1 c2cre_b_x1

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(mean)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}
{space 0}{space 0}{ralign 12:ctrue_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf:-3.19e-08}}}{space 1}
{space 0}{space 0}{ralign 12:c2true_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0229257}}}{space 1}
{space 0}{space 0}{ralign 12:cnofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1253695}}}{space 1}
{space 0}{space 0}{ralign 12:c2nofe_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .1253695}}}{space 1}
{space 0}{space 0}{ralign 12:ccre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0028147}}}{space 1}
{space 0}{space 0}{ralign 12:c2cre_b_x1}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0258878}}}{space 1}

{com}. est sto m4
{txt}
{com}. 
. graph combine f1 f2 f3 f4       , nocopies altshrink scale(1.1)
{res}{txt}
{com}. graph export sim_v2/fig1.png, replace width(1000)
{txt}{p 0 4 2}
file {bf}
sim_v2/fig1.png{rm}
saved as
PNG
format
{p_end}

{com}. 
. 
. esttab m1 m2 m3 m4 using sim_v2/table1.txt, cell(mean(fmt(3))) nonum mtitle(Probit FProbit Tobit Poisson) collab(none) ///
>         varlabel(ctrue_b_x1 "True:Bias" c2true_b_x1 "True:MAE" cnofe_b_x1 "Pool:Bias" c2nofe_b_x1 "Pool:MAE" ccre_b_x1 "CRE:Bias"c2cre_b_x1 "CRE:MAE") md replace
{res}{txt}(output written to {browse  `"sim_v2/table1.txt"'})

{com}. 
. log close       
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\frios\Documents\cre_stata\sim_v2/main_log.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 3 Jun 2025, 12:32:18
{txt}{.-}
{smcl}
{txt}{sf}{ul off}